"use strict";function createHttpBackendMock(e,t,n){function r(e,t,n){return angular.isFunction(e)?e:function(){return angular.isNumber(e)?[e,t,n]:[200,e,t]}}function i(e,r,i,o,u){function p(e){return angular.isString(e)||angular.isFunction(e)||e instanceof RegExp?e:angular.toJson(e)}var d=new MockXhr,f=c[0],h=!1;if(f&&f.match(e,r)){if(!f.matchData(i))throw Error("Expected "+f+" with different data\n"+"EXPECTED: "+p(f.data)+"\nGOT:      "+i);if(!f.matchHeaders(u))throw Error("Expected "+f+" with different headers\n"+"EXPECTED: "+p(f.headers)+"\nGOT:      "+p(u));if(c.shift(),f.response)return l.push(function(){var t=f.response(e,r,i,u);d.$$respHeaders=t[2],o(t[0],t[1],d.getAllResponseHeaders())}),void 0;h=!0}for(var g,v=-1;g=a[++v];)if(g.match(e,r,i,u||{})){if(g.response)(n?n.defer:s)(function(){var t=g.response(e,r,i,u);d.$$respHeaders=t[2],o(t[0],t[1],d.getAllResponseHeaders())});else{if(!g.passThrough)throw Error("No response defined !");t(e,r,i,o,u)}return}throw h?Error("No response defined !"):Error("Unexpected request: "+e+" "+r+"\n"+(f?"Expected "+f:"No more request expected"))}function o(e){angular.forEach(["GET","DELETE","JSONP"],function(t){i[e+t]=function(n,r){return i[e](t,n,void 0,r)}}),angular.forEach(["PUT","POST","PATCH"],function(t){i[e+t]=function(n,r,o){return i[e](t,n,r,o)}})}var a=[],c=[],l=[],s=angular.bind(l,l.push);return i.when=function(e,t,i,o){var c=new MockHttpExpectation(e,t,i,o),l={respond:function(e,t,n){c.response=r(e,t,n)}};return n&&(l.passThrough=function(){c.passThrough=!0}),a.push(c),l},o("when"),i.expect=function(e,t,n,i){var o=new MockHttpExpectation(e,t,n,i);return c.push(o),{respond:function(e,t,n){o.response=r(e,t,n)}}},o("expect"),i.flush=function(t){if(e.$digest(),!l.length)throw Error("No pending request to flush !");if(angular.isDefined(t))for(;t--;){if(!l.length)throw Error("No more pending request to flush !");l.shift()()}else for(;l.length;)l.shift()();i.verifyNoOutstandingExpectation()},i.verifyNoOutstandingExpectation=function(){if(e.$digest(),c.length)throw Error("Unsatisfied requests: "+c.join(", "))},i.verifyNoOutstandingRequest=function(){if(l.length)throw Error("Unflushed requests: "+l.length)},i.resetExpectations=function(){c.length=0,l.length=0},i}function MockHttpExpectation(e,t,n,r){this.data=n,this.headers=r,this.match=function(t,n,r,i){return e!=t?!1:this.matchUrl(n)?angular.isDefined(r)&&!this.matchData(r)?!1:angular.isDefined(i)&&!this.matchHeaders(i)?!1:!0:!1},this.matchUrl=function(e){return t?angular.isFunction(t.test)?t.test(e):t==e:!0},this.matchHeaders=function(e){return angular.isUndefined(r)?!0:angular.isFunction(r)?r(e):angular.equals(r,e)},this.matchData=function(e){return angular.isUndefined(n)?!0:n&&angular.isFunction(n.test)?n.test(e):n&&!angular.isString(n)?angular.toJson(n)==e:n==e},this.toString=function(){return e+" "+t}}function MockXhr(){MockXhr.$$lastInstance=this,this.open=function(e,t,n){this.$$method=e,this.$$url=t,this.$$async=n,this.$$reqHeaders={},this.$$respHeaders={}},this.send=function(e){this.$$data=e},this.setRequestHeader=function(e,t){this.$$reqHeaders[e]=t},this.getResponseHeader=function(e){var t=this.$$respHeaders[e];return t?t:(e=angular.lowercase(e),(t=this.$$respHeaders[e])?t:(t=void 0,angular.forEach(this.$$respHeaders,function(n,r){t||angular.lowercase(r)!=e||(t=n)}),t))},this.getAllResponseHeaders=function(){var e=[];return angular.forEach(this.$$respHeaders,function(t,n){e.push(n+": "+t)}),e.join("\n")},this.abort=angular.noop}function CategoryCtrl(e,t,n,r){r.active=n.category,t.authorized=!0,t.loading=!0,t.types=e.public({categories:n.category},function(){t.loading=!1})}function CreateCtrl(e,t,n,r,i,o){i.active="create",n.authorized=!!t.get().access_token,n.type=new e,n.create=function(){n.type.$save(function(){i.active="yours",o.url("types/"+n.type.id)})}}function DashboardCtrl(e,t,n,r,i){t.active="",e.alerts=[],e.oauth={redirect:"http://t.lelylan.com",client:"49e0f0319b3c773b083c8e3da3b946a10ddf5485d2e3ceadf91428dfb3f05471",scope:"types"},e.$on("lelylan:logout",function(){t.active="",r.path("/")}),e.$on("lelylan:type:delete",function(n,o){t.active="yours",r.path("types"),e.alerts.push({type:"success",msg:o.name+" successfully deleted"}),i(function(){e.closeAlert(e.alerts.length-1)},1e4)}),e.closeAlert=function(t){e.alerts.splice(t,1)}}function PopularCtrl(e,t){t.active="popular",e.authorized=!0,e.loading=!1,e.types=popularTypesList}function YoursCtrl(e,t,n,r){r.active="yours",n.authorized=!!t.get().access_token,n.loading=!0,n.authorized&&(n.types=e.query({per:250},function(){n.loading=!1}))}function TypeCtrl(e,t){e.typeId=t.typeId}var app=angular.module("lelylan.components.type",["lelylan","ui.bootstrap","lelylan.components.device","lelylan.components.type.directive","lelylan.components.type.services.type","lelylan.components.type.services.property","lelylan.components.type.services.function","lelylan.components.type.services.status","lelylan.components.type.services.category","lelylan.components.type.services.simulation","lelylan.components.type.services.config","lelylan.components.type.services.helper","ngMockE2E"]),directives=angular.module("lelylan.components.type.directive",[]);directives.directive("lelylanType",["Type","Property","Function","Status","Simulation","LoggedUser","TCHelper","TCType","TCProperty","TCFunction","TCStatus","TCCategory","TCConfig","$rootScope","$compile","$templateCache","$timeout",function(e,t,n,r,i,o,a,c,l,s,u,p,d,f,h,g,v){var m={restrict:"EA",replace:!0,templateUrl:"/views/templates/type.html",scope:{typeId:"="}};return m.link=function(h){h.show={properties:!0},h.$watch("typeId",function(){h.typeId&&(h.type=e.get({id:h.typeId},g))}),h.init=function(){g()};var g=function(){h.original=angular.copy(h.type),h.user=o.get(),h.config=d,m(),h.loaded=!0},m=function(){c.initDescription(h.type),l.init(h.type),s.init(h.type),u.init(h.type),p.init(h.type)};h.initProperty=function(e){l.initProperty(e)},h.newProperty=function(){var e=angular.copy(d.base.property);h.type.properties.push(e),l.initProperty(e),h.open(e,"edit","Create")},h.updateProperty=function(e){""==e.acceptedString&&(e.acceptedString=null),e.accepted=angular.fromJson(e.acceptedString);var n=new t(e);n.$update(function(){h.close(e,"edit"),l.initProperty(e),g()})},h.createProperty=function(e){e.accepted=angular.fromJson(e.acceptedString),h.close(e,"edit"),delete e.temp;var n=new t(e);n.$save(function(){angular.extend(e,n),h.updateType(e,"properties")}),e.id=d.saving.message},h.deleteProperty=function(e){h.close(e,"delete");var n=new t(e);n.$delete(function(){b(e,"properties"),h.updateType(e,"properties")})},h.newFunction=function(){var e=angular.copy(d.base.function);h.type.functions.push(e),s.initFunction(e,h.type),h.open(e,"edit","Create")},h.updateFunction=function(e){var t=new n(e);t.$update(function(){h.close(e,"edit"),s.initFunction(e,h.type),g()})},h.createFunction=function(e){h.close(e,"edit"),delete e.temp;var t=new n(e);t.$save(function(){angular.extend(e,t),h.updateType(e,"functions")}),e.id=d.saving.message},h.deleteFunction=function(e){h.close(e,"delete");var t=new n(e);t.$delete(function(){b(e,"functions"),h.updateType(e,"functions")})},h.addFunctionProperty=function(e){e.properties.push({})},h.newStatus=function(){var e=angular.copy(d.base.status);h.type.statuses.push(e),u.initStatus(e,h.type),h.open(e,"edit","Create")},h.updateStatus=function(e){var t=new r(e);t.$update(function(){h.close(e,"edit"),u.initStatus(e,h.type),g()})},h.createStatus=function(e){h.close(e,"edit"),delete e.temp;var t=new r(e);v(function(){t.$save(function(){angular.extend(e,t),h.updateType(e,"statuses")})},1e3),e.id=d.saving.message},h.deleteStatus=function(e){h.close(e,"delete");var t=new r(e);t.$delete(function(){b(e,"statuses"),h.updateType(e,"statuses")})},h.addStatusProperty=function(e){e.properties.push({})},h.toggleCategory=function(t){var n=new e;n.id=h.type.id;var r=_.include(h.type.categories,t.name);r?h.type.categories=_.reject(h.type.categories,function(e){return e==t.name}):h.type.categories.push(t.name),n.categories=h.type.categories,n.$update(function(){h.type.categories=n.categories,g()})},h.updateType=function(t,n){var r=new e;r.id=h.type.id,r[n]=a.findIds(h.type[n]),r.$update(function(){h.type[n]=r[n],g()})},h.destroy=function(){h.type.$delete(function(){y(),h.destroyed=!0})},h.updateName=function(){var t=new e({id:h.type.id,name:h.type.name});t.$update(function(){h.type=t,g()}),h.config.inplace.name=!0,h.nameForm.$setPristine()},h.updateDescription=function(){var t=new e({id:h.type.id,description:h.type.description});t.$update(function(){h.type=t,g()}),h.config.inplace.description=!0,h.descriptionForm.$setPristine()},h.simulate=function(){h.simulatedDevice=i.set(h.type),h.simulatedType=new e(h.type)},h.showProperties=function(){h.show={properties:!0}},h.showFunctions=function(){h.show={functions:!0}},h.showStatuses=function(){h.show={statuses:!0}},h.showCategories=function(){h.show={categories:!0}},h.showSimulation=function(){h.show={simulation:!0},h.simulate()},h.showDelete=function(){h.show={"delete":!0}},h.close=function(e,t){e[t]=!1},h.open=function(e,t,n){h.modal={resource:e,visible:!0},e[t]=!0,e.label=n},h.reset=function(e,t,n){h.close(e,t,n),h.modal.visible&&(n&&n.$setPristine(),e.temp||$(e),e.temp&&w(e),h.modal.visible=!1)};var y=function(){f.$broadcast("lelylan:type:delete",h.type)},$=function(e){if("property"==h.modal.resource.isA&&angular.extend(e,a.findResource(e.id,h.original.properties)),"function"==h.modal.resource.isA&&e.id&&e.id!=d.saving.message){var t=a.findResource(e.id,h.original.functions);e.name=angular.copy(t.name),e.properties=angular.copy(t.properties)}if("status"==h.modal.resource.isA&&e.id&&e.id!=d.saving.message){var t=a.findResource(e.id,h.original.statuses);e.name=angular.copy(t.name),e.properties=angular.copy(t.properties),e.function=angular.copy(t.function)}m()},w=function(){v(function(){"property"==h.modal.resource.isA&&h.type.properties.pop(),"function"==h.modal.resource.isA&&h.type.functions.pop(),"status"==h.modal.resource.isA&&h.type.statuses.pop()},0)},b=function(e,t){h.type[t]=_.reject(h.type[t],function(t){return t.id==e.id})}},m}]);var service=angular.module("lelylan.components.type.services.type",[]);service.factory("TCType",[function(){var e={};return e.initDescription=function(e){var t=new Showdown.converter;e.shadowDescription=t.makeHtml(e.description)},e}]);var service=angular.module("lelylan.components.type.services.property",[]);service.factory("TCProperty",["TCConfig",function(e){var t={};return t.init=function(e){_.each(e.properties,function(e){e.isA="property",t.initProperty(e)})},t.initProperty=function(e){t.setPlaceholder(e),t.normalizeProperty(e)},t.setPlaceholder=function(t){t.placeholders=e.property.placeholders[t.type]},t.normalizeProperty=function(e){e.acceptedString=null,e.accepted&&angular.isObject(e.accepted)&&(e.acceptedList=JSON.stringify(e.accepted),e.acceptedList=_.map(e.accepted,function(e,t){return{key:t,value:e}}),e.acceptedString=JSON.stringify(e.accepted))},t}]);var service=angular.module("lelylan.components.type.services.function",[]);service.factory("TCFunction",["TCHelper",function(e){var t={};return t.init=function(e){_.each(e.functions,function(n){n.isA="function",t.initFunction(n,e)})},t.initFunction=function(t,n){e.extendResources(t.properties,n.properties)},t}]);var service=angular.module("lelylan.components.type.services.status",[]);service.factory("TCStatus",["TCHelper",function(e){var t={};return t.init=function(e){_.each(e.statuses,function(n){n.isA="status",t.initStatus(n,e)})},t.initStatus=function(t,n){t.function&&e.extendResources([t.function],n.functions),e.extendResources(t.properties,n.properties)},t}]);var service=angular.module("lelylan.components.type.services.category",[]);service.factory("TCCategory",["TCConfig",function(e){var t={};return t.init=function(t){_.each(e.categories,function(e){e.active=_.include(t.categories,e.name)})},t}]);var service=angular.module("lelylan.components.type.services.simulation",[]);service.factory("Simulation",["Device",function(e){var t,n={};return n.set=function(n){return t={uri:"http://api.lelylan.com/devices/1",id:"1",name:n.name,type:{uri:n.uri,id:n.id},physical:{uri:"http://arduino.house.com/1"},pending:!1,properties:[],created_at:new Date,updated_at:new Date,updated_from:{uri:"http://api.lelylan.com/users/1",name:"Lelylan"}},_.each(n.properties,function(e){var n={uri:e.uri,id:e.id,value:e.default,expected:e.default,pending:!1,suggested:angular.fromJson(e.suggested)};t.properties.push(n)}),new e(t)},n.get=function(){return t},n.update=function(e){e=angular.fromJson(e);var t=n.get();return e.name&&(t.name=e.name),e.physical&&(t.physical.uri=e.physical),_.each(e.properties,function(e){var n=_.find(t.properties,function(t){return t.id==e.id});n.expected=n.value=e.value}),t.updated_at=new Date,t},n}]);var service=angular.module("lelylan.components.type.services.config",[]);service.factory("TCConfig",["Category",function(e){var t={show:{properties:!0},inplace:{name:!0,description:!0},saving:{message:"saving..."},property:{types:{text:"Text",range:"Range",number:"Number",color:"Color",password:"Password",date:"Date",time:"Time",datetime:"Date & Time",url:"URL"},placeholders:{text:{"default":"off",accepted:JSON.stringify({on:"On",off:"Off"})},number:{"default":"0",accepted:JSON.stringify({0:"Min",50:"Medium",100:"Max"})},range:{"default":"0",range:{min:0,max:100,step:.1}},color:{"default":"#FFF",accepted:JSON.stringify({"#FFF":"White","#000":"Black"})},password:{"default":"******",accepted:""},url:{"default":"http://example.com",accepted:""},time:{"default":"08:00",accepted:""},date:{"default":"1861-03-17",accepted:""},datetime:{"default":"1861-03-17 12:45:29Z",accepted:""}}},categories:e.query(),base:{property:{name:"",temp:!0,isA:"property",type:"text"},"function":{name:"",temp:!0,isA:"function",properties:[{}]},status:{name:"",temp:!0,isA:"status",properties:[{}],"function":{}}}};return t}]);var service=angular.module("lelylan.components.type.services.helper",[]);service.factory("TCHelper",[function(){var e={};return e.extendResources=function(t,n){_.each(t,function(t){angular.extend(t,e.findResource(t.id,n))})},e.findResource=function(e,t){return _.find(t,function(t){return t.id==e})},e.findIds=function(e){return _.reduce(e,function(e,t){return e.concat(t.id)},[])},e}]),angular.mock={},angular.mock.$BrowserProvider=function(){this.$get=function(){return new angular.mock.$Browser}},angular.mock.$Browser=function(){var e=this;this.isMock=!0,e.$$url="http://server/",e.$$lastUrl=e.$$url,e.pollFns=[],e.$$completeOutstandingRequest=angular.noop,e.$$incOutstandingRequestCount=angular.noop,e.onUrlChange=function(t){return e.pollFns.push(function(){e.$$lastUrl!=e.$$url&&(e.$$lastUrl=e.$$url,t(e.$$url))}),t},e.cookieHash={},e.lastCookieHash={},e.deferredFns=[],e.deferredNextId=0,e.defer=function(t,n){return n=n||0,e.deferredFns.push({time:e.defer.now+n,fn:t,id:e.deferredNextId}),e.deferredFns.sort(function(e,t){return e.time-t.time}),e.deferredNextId++},e.defer.now=0,e.defer.cancel=function(t){var n;return angular.forEach(e.deferredFns,function(e,r){e.id===t&&(n=r)}),void 0!==n?(e.deferredFns.splice(n,1),!0):!1},e.defer.flush=function(t){if(angular.isDefined(t))e.defer.now+=t;else{if(!e.deferredFns.length)throw Error("No deferred tasks to be flushed");e.defer.now=e.deferredFns[e.deferredFns.length-1].time}for(;e.deferredFns.length&&e.deferredFns[0].time<=e.defer.now;)e.deferredFns.shift().fn()},e.$$baseHref="",e.baseHref=function(){return this.$$baseHref}},angular.mock.$Browser.prototype={poll:function(){angular.forEach(this.pollFns,function(e){e()})},addPollFn:function(e){return this.pollFns.push(e),e},url:function(e){return e?(this.$$url=e,this):this.$$url},cookies:function(e,t){return e?(void 0==t?delete this.cookieHash[e]:angular.isString(t)&&4096>=t.length&&(this.cookieHash[e]=t),void 0):(angular.equals(this.cookieHash,this.lastCookieHash)||(this.lastCookieHash=angular.copy(this.cookieHash),this.cookieHash=angular.copy(this.cookieHash)),this.cookieHash)},notifyWhenNoOutstandingRequests:function(e){e()}},angular.mock.$ExceptionHandlerProvider=function(){var e;this.mode=function(t){switch(t){case"rethrow":e=function(e){throw e};break;case"log":var n=[];e=function(e){1==arguments.length?n.push(e):n.push([].slice.call(arguments,0))},e.errors=n;break;default:throw Error("Unknown mode '"+t+"', only 'log'/'rethrow' modes are allowed!")}},this.$get=function(){return e},this.mode("rethrow")},angular.mock.$LogProvider=function(){function e(e,t,n){return e.concat(Array.prototype.slice.call(t,n))}this.$get=function(){var t={log:function(){t.log.logs.push(e([],arguments,0))},warn:function(){t.warn.logs.push(e([],arguments,0))},info:function(){t.info.logs.push(e([],arguments,0))},error:function(){t.error.logs.push(e([],arguments,0))}};return t.reset=function(){t.log.logs=[],t.warn.logs=[],t.info.logs=[],t.error.logs=[]},t.assertEmpty=function(){var e=[];if(angular.forEach(["error","warn","info","log"],function(n){angular.forEach(t[n].logs,function(t){angular.forEach(t,function(t){e.push("MOCK $log ("+n+"): "+(t+"")+"\n"+(t.stack||""))})})}),e.length)throw e.unshift("Expected $log to be empty! Either a message was logged unexpectedly, or an expected log message was not checked and removed:"),e.push(""),Error(e.join("\n---------\n"))},t.reset(),t}},function(){function e(e){var n;if(n=e.match(r)){var i=new Date(0),o=0,a=0;return n[9]&&(o=t(n[9]+n[10]),a=t(n[9]+n[11])),i.setUTCFullYear(t(n[1]),t(n[2])-1,t(n[3])),i.setUTCHours(t(n[4]||0)-o,t(n[5]||0)-a,t(n[6]||0),t(n[7]||0)),i}return e}function t(e){return parseInt(e,10)}function n(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;t>e.length;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}var r=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?:\:?(\d\d)(?:\:?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;angular.mock.TzDate=function(t,r){var i=new Date(0);if(angular.isString(r)){var o=r;if(i.origDate=e(r),r=i.origDate.getTime(),isNaN(r))throw{name:"Illegal Argument",message:"Arg '"+o+"' passed into TzDate constructor is not a valid date string"}}else i.origDate=new Date(r);var a=new Date(r).getTimezoneOffset();i.offsetDiff=6e4*a-36e5*t,i.date=new Date(r+i.offsetDiff),i.getTime=function(){return i.date.getTime()-i.offsetDiff},i.toLocaleDateString=function(){return i.date.toLocaleDateString()},i.getFullYear=function(){return i.date.getFullYear()},i.getMonth=function(){return i.date.getMonth()},i.getDate=function(){return i.date.getDate()},i.getHours=function(){return i.date.getHours()},i.getMinutes=function(){return i.date.getMinutes()},i.getSeconds=function(){return i.date.getSeconds()},i.getMilliseconds=function(){return i.date.getMilliseconds()},i.getTimezoneOffset=function(){return 60*t},i.getUTCFullYear=function(){return i.origDate.getUTCFullYear()},i.getUTCMonth=function(){return i.origDate.getUTCMonth()},i.getUTCDate=function(){return i.origDate.getUTCDate()},i.getUTCHours=function(){return i.origDate.getUTCHours()},i.getUTCMinutes=function(){return i.origDate.getUTCMinutes()},i.getUTCSeconds=function(){return i.origDate.getUTCSeconds()},i.getUTCMilliseconds=function(){return i.origDate.getUTCMilliseconds()},i.getDay=function(){return i.date.getDay()},i.toISOString&&(i.toISOString=function(){return n(i.origDate.getUTCFullYear(),4)+"-"+n(i.origDate.getUTCMonth()+1,2)+"-"+n(i.origDate.getUTCDate(),2)+"T"+n(i.origDate.getUTCHours(),2)+":"+n(i.origDate.getUTCMinutes(),2)+":"+n(i.origDate.getUTCSeconds(),2)+"."+n(i.origDate.getUTCMilliseconds(),3)+"Z"});var c=["getUTCDay","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toGMTString","toJSON","toLocaleFormat","toLocaleString","toLocaleTimeString","toSource","toString","toTimeString","toUTCString","valueOf"];return angular.forEach(c,function(e){i[e]=function(){throw Error("Method '"+e+"' is not implemented in the TzDate mock")}}),i},angular.mock.TzDate.prototype=Date.prototype}(),angular.mock.createMockWindow=function(){var e={},t=[];return e.document=window.document,e.getComputedStyle=angular.bind(window,window.getComputedStyle),e.scrollTo=angular.bind(window,window.scrollTo),e.navigator=window.navigator,e.setTimeout=function(e,n){t.push({fn:e,delay:n})},e.setTimeout.queue=t,e.setTimeout.expect=function(e){return t.length>0?{process:function(){t.shift().fn()}}:(expect("SetTimoutQueue empty. Expecting delay of ").toEqual(e),void 0)},e},angular.mock.dump=function(e){function t(e){var r;return angular.isElement(e)?(e=angular.element(e),r=angular.element("<div></div>"),angular.forEach(e,function(e){r.append(angular.element(e).clone())}),r=r.html()):angular.isArray(e)?(r=[],angular.forEach(e,function(e){r.push(t(e))}),r="[ "+r.join(", ")+" ]"):r=angular.isObject(e)?angular.isFunction(e.$eval)&&angular.isFunction(e.$apply)?n(e):e instanceof Error?e.stack||""+e.name+": "+e.message:angular.toJson(e,!0):e+"",r}function n(e,t){t=t||"  ";var r=[t+"Scope("+e.$id+"): {"];for(var i in e)e.hasOwnProperty(i)&&!i.match(/^(\$|this)/)&&r.push("  "+i+": "+angular.toJson(e[i]));for(var o=e.$$childHead;o;)r.push(n(o,t+"  ")),o=o.$$nextSibling;return r.push("}"),r.join("\n"+t)}return t(e)},angular.mock.$HttpBackendProvider=function(){this.$get=["$rootScope",createHttpBackendMock]},angular.mock.$TimeoutDecorator=function(e,t){function n(e){var t=[];return angular.forEach(e,function(e){t.push("{id: "+e.id+", "+"time: "+e.time+"}")}),t.join(", ")}return e.flush=function(){t.defer.flush()},e.verifyNoPendingTasks=function(){if(t.deferredFns.length)throw Error("Deferred tasks to flush ("+t.deferredFns.length+"): "+n(t.deferredFns))},e},angular.mock.$RootElementProvider=function(){this.$get=function(){return angular.element("<div ng-app></div>")}},angular.module("ngMock",["ng"]).provider({$browser:angular.mock.$BrowserProvider,$exceptionHandler:angular.mock.$ExceptionHandlerProvider,$log:angular.mock.$LogProvider,$httpBackend:angular.mock.$HttpBackendProvider,$rootElement:angular.mock.$RootElementProvider}).config(function(e){e.decorator("$timeout",angular.mock.$TimeoutDecorator)}),angular.module("ngMockE2E",["ng"]).config(["$provide",function(e){e.decorator("$httpBackend",angular.mock.e2e.$httpBackendDecorator)}]),angular.mock.e2e={},angular.mock.e2e.$httpBackendDecorator=["$rootScope","$delegate","$browser",createHttpBackendMock],angular.mock.clearDataCache=function(){var e,t=angular.element.cache;for(e in t)if(t.hasOwnProperty(e)){var n=t[e].handle;n&&angular.element(n.elem).unbind(),delete t[e]}},window.jstestdriver&&function(e){e.dump=function(){var t=[];angular.forEach(arguments,function(e){t.push(angular.mock.dump(e))}),jstestdriver.console.log.apply(jstestdriver.console,t),e.console&&e.console.log.apply(e.console,t)}}(window),(window.jasmine||window.mocha)&&function(e){function t(){return n&&(e.mocha||n.queue.running)}var n=null;beforeEach(function(){n=this}),afterEach(function(){var e=n.$injector;n.$injector=null,n.$modules=null,n=null,e&&(e.get("$rootElement").unbind(),e.get("$browser").pollFns.length=0),angular.mock.clearDataCache(),angular.forEach(angular.element.fragments,function(e,t){delete angular.element.fragments[t]}),MockXhr.$$lastInstance=null,angular.forEach(angular.callbacks,function(e,t){delete angular.callbacks[t]}),angular.callbacks.counter=0}),e.module=angular.mock.module=function(){function e(){if(n.$injector)throw Error("Injector already created, can not register a module!");var e=n.$modules||(n.$modules=[]);angular.forEach(r,function(t){e.push(t)})}var r=Array.prototype.slice.call(arguments,0);return t()?e():e},e.inject=angular.mock.inject=function(){function e(){var e=n.$modules||[];e.unshift("ngMock"),e.unshift("ng");var t=n.$injector;t||(t=n.$injector=angular.injector(e));for(var o=0,a=r.length;a>o;o++)try{t.invoke(r[o]||angular.noop,this)}catch(c){throw c.stack&&i&&(c.stack+="\n"+i.stack),c}finally{i=null}}var r=Array.prototype.slice.call(arguments,0),i=Error("Declaration Location");return t()?e():e}}(window);var service=angular.module("lelylan.components.device.simulate",[]);service.run(["$httpBackend","Simulation","lelylan.config",function(e,t,n){var r=n.endpoint.replace("\\:",":").replace();e.whenPUT(r+"/devices/1/properties").respond(function(e,n,r){return[200,t.update(r),{}]}),e.whenGET(/.*/).passThrough(),e.whenPOST(/.*/).passThrough(),e.whenPUT(/.*/).passThrough(),e.whenDELETE(/.*/).passThrough()}]),angular.module("lelylan",["lelylan.profile","lelylan.device","lelylan.history","lelylan.activation","lelylan.deactivation","lelylan.type","lelylan.property","lelylan.function","lelylan.status","lelylan.location","lelylan.subscription","lelylan.category","lelylan.loggedUser","lelylan.accessToken","lelylan.requestWrapper","lelylan.basicAuth","lelylan.basicRequestWrapper","lelylan.implicitFlow","lelylan.config","lelylan.requests","lelylan.errors","lelylan.login"]);var client=angular.module("lelylan.activation",["ngResource"]);client.factory("Activation",["RequestWrapper","$resource","lelylan.config",function(e,t,n){var r=t(n.endpoint+"/activations",{},{execute:{method:"POST"}});return e.wrap(r,["execute"])}]);var client=angular.module("lelylan.deactivation",["ngResource"]);client.factory("Deactivation",["RequestWrapper","$resource","lelylan.config",function(e,t,n){var r=t(n.endpoint+"/activations/:activationCode",{activationCode:"@activation_code"},{execute:{method:"DELETE"}});return e.wrap(r,["execute"])}]);var client=angular.module("lelylan.device",["ngResource"]);client.factory("Device",["RequestWrapper","$resource","lelylan.config",function(e,t,n){var r=t(n.endpoint+"/devices/:id/:action",{id:"@id"},{privates:{method:"GET",params:{action:"privates"}},update:{method:"PUT"},properties:{method:"PUT",params:{action:"properties"}},execute:{method:"PUT",params:{action:"functions"}}});return e.wrap(r,["get","privates","query","save","update","delete","properties","execute"])}]);var client=angular.module("lelylan.function",["ngResource"]);client.factory("Function",["RequestWrapper","$resource","lelylan.config",function(e,t,n){var r=t(n.endpoint+"/functions/:id",{id:"@id"},{update:{method:"PUT"},"public":{method:"GET",params:{id:"public"},isArray:!0}});return e.wrap(r,["get","query","save","update","delete"])}]);var client=angular.module("lelylan.history",["ngResource"]);client.factory("History",["RequestWrapper","$resource","lelylan.config",function(e,t,n){var r=t(n.endpoint+"/histories/:id",{id:"@id"});return e.wrap(r,["get","query"])}]);var client=angular.module("lelylan.location",["ngResource"]);client.factory("Location",["RequestWrapper","$resource","lelylan.config",function(e,t,n){var r=t(n.endpoint+"/locations/:id",{id:"@id"},{update:{method:"PUT"}});return e.wrap(r,["get","query","save","update","delete"])}]);var client=angular.module("lelylan.profile",["ngResource"]);client.factory("Profile",["RequestWrapper","$resource","lelylan.config","$timeout",function(e,t,n){var r=t(n.endpoint+"/me"),i=e.wrap(r,["get"]);return i}]);var client=angular.module("lelylan.property",["ngResource"]);client.factory("Property",["RequestWrapper","$resource","lelylan.config",function(e,t,n){var r=t(n.endpoint+"/properties/:id",{id:"@id"},{update:{method:"PUT"},"public":{method:"GET",params:{id:"public"},isArray:!0}});return e.wrap(r,["get","query","save","update","delete"])}]);var client=angular.module("lelylan.status",["ngResource"]);client.factory("Status",["RequestWrapper","$resource","lelylan.config",function(e,t,n){var r=t(n.endpoint+"/statuses/:id",{id:"@id"},{update:{method:"PUT"},"public":{method:"GET",params:{id:"public"},isArray:!0}});return e.wrap(r,["get","query","save","update","delete"])}]);var client=angular.module("lelylan.subscription",["ngResource"]);client.factory("Subscription",["BasicRequestWrapper","$resource","lelylan.config",function(e,t,n){var r=t(n.endpoint+"/subscriptions/:id",{id:"@id"},{update:{method:"PUT"}});return e.wrap(r,["get","query","save","update","delete"])}]);var client=angular.module("lelylan.category",["ngResource"]);client.factory("Category",["RequestWrapper","$resource","lelylan.config",function(e,t,n){var r=t(n.endpoint+"/categories");return e.wrap(r,["query"])}]);var client=angular.module("lelylan.type",["ngResource"]);client.factory("Type",["RequestWrapper","$resource","lelylan.config",function(e,t,n){var r=t(n.endpoint+"/types/:id",{id:"@id"},{update:{method:"PUT"},"public":{method:"GET",params:{id:"public"},isArray:!0},popular:{method:"GET",params:{id:"popular"},isArray:!0}});return e.wrap(r,["get","query","save","update","delete"])}]);var client=angular.module("lelylan.loggedUser",[]);client.factory("LoggedUser",["$location","$http",function(){var e={},t={};return e.get=function(){return t},e.set=function(e){return t=e},e}]);var client=angular.module("lelylan.basicRequestWrapper",["ngResource"]);client.factory("BasicRequestWrapper",["BasicAuth","Base64","$http",function(e,t,n){var r={};r.wrap=function(e,t){for(var n=e,r=0;t.length>r;r++)i(n,t[r]);return n};var i=function(t,n){t["_"+n]=t[n],t[n]=function(r,i,c,l){return e.get().clientID&&e.get().clientSecret?o():a(),t["_"+n].call(this,r,i,c,l)}},o=function(){var r=e.get();n.defaults.headers.common.Authorization=t.encode(r.clientID+":"+r.clientSecret)},a=function(){delete n.defaults.headers.common.Authorization};return r}]);var client=angular.module("lelylan.basicAuth",["ngResource"]);client.factory("BasicAuth",[function(){var e={},t={};return e.get=function(){return t},e.set=function(e){angular.extend(t,e)},e}]),client.factory("Base64",[function(){var e={},t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.encode=function(e){var t,r,e,i,o;for(r=e.length,i=0,o="";r>0;)r>2?(t=e.substr(i,3),o+=n(t,3)):(t=e.substr(i,r),o+=n(t,r)),r-=3,i+=3;return o};var n=function(e,n){var r,i,o,a,c=Array(4);return r=e.charCodeAt(0),c[0]=t.charAt(r>>2),2>n?(i=0,o=0,a=0):(i=e.charCodeAt(1),3>n?(o=0,a=0):(o=e.charCodeAt(2),a=e.charCodeAt(3))),c[1]=t.charAt((3&r)<<4|(240&i)>>4),c[2]=n>1?t.charAt((15&i)<<2|(192&o)>>6):"=",c[3]=n>2?t.charAt(63&o):"=",c[0]+c[1]+c[2]+c[3]};return e}]);var client=angular.module("lelylan.requestWrapper",["ngResource"]);client.factory("RequestWrapper",["AccessToken","ImplicitFlow","$http",function(e,t,n){var r,i={};i.wrap=function(t,n){r=e.initialize();for(var i=t,a=0;n.length>a;a++)o(i,n[a]);return i};var o=function(n,i){n["_"+i]=n[i],n[i]=function(o,l,s,u){return e.get().access_token?a():c(),r.expires_at&&r.expires_at<new Date&&window.location.replace(t.url()),n["_"+i].call(this,o,l,s,u)}},a=function(){n.defaults.headers.common.Authorization="Bearer "+r.access_token},c=function(){delete n.defaults.headers.common.Authorization};return i}]);var client=angular.module("lelylan.accessToken",["ngResource"]);client.factory("AccessToken",["$location","$http",function(e){var t={},n={};t.get=function(){return n},t.initialize=function(){var e=t.parseToken();return e.access_token&&t.set(e),e.error&&t.set(e),n},t.set=function(e){return angular.extend(n,e),r(),n},t.delete=function(){n={}},t.parseToken=function(){for(var t={},n=e.hash().split("&"),r=0;n.length>r;r++){var i=n[r].split("="),o=i[0],a=i[1];t[o]=a}return t};var r=function(){var e=new Date;e.setSeconds(e.getSeconds()+parseInt(n.expires_in)-60),n.expires_at=e};return t}]);var client=angular.module("lelylan.implicitFlow",["ngResource"]);client.factory("ImplicitFlow",["AccessToken","$location",function(e,t){var n,r={};r.url=function(e){return e&&(n=e),n.site+n.authorizePath+"?response_type=token&"+"client_id="+n.client+"&"+"redirect_uri="+n.redirect+"&"+"scope="+n.scope+"&"+"state="+n.state+i+l(t.url())},r.restoreURL=function(n){if(e.get().state){var o=e.get().state.split(i);o[0]&&e.set({state:o[0]}),o[1]&&t.url(s(o[1])),n.endpoint=r.url(n)}};var i="5c6007a2",o="e9e08740",a="008e974e",c="c1384ea1",l=function(e){return e.replace(/=/g,o).replace(/#/g,a).replace(/&/g,c)
},s=function(e){return e.replace(/e9e08740/g,"=").replace(/008e974e/g,"#").replace(/c1384ea1/g,"&")};return r}]),angular.module("lelylan.errors",[]).config(["$httpProvider",function(e){var t={400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",420:"Enhance Your Calm",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",444:"No Response",449:"Retry With",499:"Client Closed Request",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},n=["$rootScope","$q",function(e,n){function r(e){return e}function i(r){if(r.status>=400){var i={status:r.status,message:t[r.status]};e.$broadcast("lelylan:error",i),e.$broadcast("lelylan:error:"+r.status,i);var o=n.defer();return o.promise}return n.reject(r)}return function(e){return e.then(r,i)}}];e.responseInterceptors.push(n)}]),angular.module("lelylan.requests",[]).config(["$httpProvider",function(e){var t,n=["$q","$injector",function(e,n){function r(e){return t=t||n.get("$http"),1>t.pendingRequests.length&&o("lelylan-request-loading","none"),e}var i,o=function(e,t){window.document.getElementById(e)&&(window.document.getElementById(e).style.display=t)};return function(e){return o("lelylan-request-loading","block"),e.then(r,i)}}];e.responseInterceptors.push(n)}]),angular.module("lelylan.config",[]).value("lelylan.config",{endpoint:"http://api.lelylan.com"});var directives=angular.module("lelylan.login",["ngCookies"]);directives.config(["$locationProvider",function(e){e.html5Mode(!0).hashPrefix("!")}]),directives.directive("login",["AccessToken","ImplicitFlow","Profile","LoggedUser","$location","$cookies","$rootScope",function(e,t,n,r,i,o,a){var c='<ul class="nav pull-right"><li ng-show="show==\'out\'" class="login"><a href="#" ng-href="{{endpoint}}">{{text || \'Sign In\'}}</a></li><li ng-show="show==\'in\'" class="logout"><a href="#" ng-click="logout()">Logout {{profile.email}}</a></li></ul>',l={restrict:"E",replace:!0,transclude:!0,template:c,scope:{site:"@",client:"@",redirect:"@",scope:"@",state:"@",flow:"@",text:"@"}};return l.link=function(i){i.$watch("client",function(){l();var t=e.initialize();return t.access_token?i.login():t.error?i.deny():p()||t.access_token||t.error?!p()||t.access_token||t.error?void 0:i.authorize():i.logout()}),i.login=function(){s(),t.restoreURL(i),i.profile=r.set(n.get()),d("logged-in"),h()},i.logout=function(){c(),g()},i.deny=function(){c(),v()},i.authorize=function(){window.location.replace(i.endpoint)};var c=function(){u(),f(),i.profile=r.set(null),e.delete()},l=function(){i.site=i.site||"http://people.lelylan.com",i.flow=i.flow||"implicit",i.authorizePath=i.authorizePath||"/oauth/authorize",i.tokenPath=i.tokenPath||"/oauth/token",i.scope=i.scope||"user",i.endpoint=t.url(i)},s=function(){i.show="in"},u=function(){i.show="out"},p=function(){return o[i.client]},d=function(e){o[i.client]=e},f=function(){delete o[i.client],delete o["#!"+i.client]},h=function(){a.$broadcast("lelylan:login",e.get())},g=function(){a.$broadcast("lelylan:logout")},v=function(){a.$broadcast("lelylan:logout:denied")}},l}]),angular.module("lelylan.components.device",["lelylan","lelylan.components.device.directive"]);var directives=angular.module("lelylan.components.device.directive",[]);directives.directive("device",["Device","Type","LoggedUser","$rootScope","$timeout",function(e,t,n,r,i){var o='<div class="device-component device-{{device.id}} type-{{type.id}}"><div class="dc-message" ng-show="destroyed && loaded"><p class="lead">The device <strong>{{type.name}}</strong> has been successfully deleted</p></div><div class="dc-main" ng-show="!destroyed && loaded"><div class="dc-header"><p class="dc-title lead" ng-show="!list">{{device.name}}</p><div class="dc-options" ng-show="options"><ul class="nav nav-pills"><li><a href="javascript:" class="action-refresh" ng-click="refresh()"><i class="icon-repeat"></i> Refresh</a></li><li><a href="javascript:" class="action-extend" ng-show="!extended" ng-click="extend()"><i class="icon-chevron-down"></i> Extended</a></li><li><a href="javascript:" class="action-compact" ng-show="extended" ng-click="compact()"><i class="icon-chevron-up"></i> Compact</a></li><li><a href="javascript:" class="action-main" ng-show="action.settings" ng-click="showMain()"><i class="icon-chevron-left"></i> Back</a></li><li><a href="javascript:" class="action-settings" ng-show="action.main" ng-click="showSettings()"><i class="icon-pencil"></i> Settings</a></li></ul></div><div class="dc-function function-{{status.function.id}} row-fluid"><div class="action"><a href="javascript:" ng-click="execute(status.function)" class="execute" title="{{status.function.name}}"></a><div ng-show="device.pending" id="pending-{{$id}}-{{device.id}}" class="pending"></div></div><div class="dc-description" ng-show="!list"><p class="status lead">{{status.name}}</p><small class="dc-updated-from muted">{{device.updated_at_relative}} from {{device.updated_from.name}}</small></div><div class="dc-list-description" ng-show="list" ng-click="fireOpen()" ng-mouseover="entry=true" ng-mouseleave="entry=false"><p class="lead color dc-name">{{device.name}}</p><p class="lead dc-status-name"><em>{{status.name}}</em></p><a ng-show="!entry" class="dc-open" href="javascript:"><img class="dc-details" src="/images/chevron-right.png"></a><a ng-show="entry" class="dc-open" href="javascript:"><img class="dc-details" src="/images/chevron-right-hover.png"></a></div></div></div><div class="dc-main" ng-show="action.main && extended"><div class="dc-functions"><hr/><div class="dc-function function-{{function.id}}" ng-repeat="function in functions"><div class="row-fluid"><div class="action"><a href="javascript:" ng-click="execute(function)" title="Execute {{function.name}}" class="execute"></a></div><div class="dc-description"><p class="name lead"><a href="javascript:" ng-click="execute(function)">{{function.name}}</a></p></div></div></div></div><div class="dc-properties"><hr/><p class="lead">Device Properties</p><div class="dc-property property-{{property.id}}" ng-repeat="property in device.properties"><span class="name"><i class="icon-chevron-right"></i> {{property.name}}</span> <span class="value color">{{property.suggested[property.expected] || property.expected}}</span></div></div></div><div class="dc-function-forms"><div class="dc-function-form function-form-{{function.id}}" ng-show="function.visible" ng-repeat="function in functions"><div class="row-fluid"><div><p class="title lead">{{function.name}}</p><small class="name muted">Fill the required params and execute your function</small><hr/><form><div ng-repeat="property in function.properties" ng-show="property.visible" class="property property-{{property.id}}"><div><small class="muted">Set {{property.name}} to {{property.value}}</small><br/><input type="{{property.type}}" min="{{property.range.min}}" max="{{property.range.max}}" step="{{property.range.step}}" ng-model="property.value"></input></div></div><div><button ng-click="updateProperties(function.properties)" class="update btn"><i class="icon-ok-sign"></i> Execute</button><button ng-click="function.visible=false" class="destroy btn"><i class="icon icon-remove"></i> Cancel</button></div></form></div></div></div></div><div class="dc-settings" ng-show="action.settings"><div class="dc-edit"><hr/><div><p class="lead">Edit Device</p><form name="editForm"><div class="control-group" ng-class="{error: editForm.name.$invalid}"><div class="input-prepend"><span class="add-on">Name &nbsp; &nbsp;</span><input type="text" name="name" ng-model="device.name" required><br/></div><small ng-show="editForm.name.$error.required" class="help-inline">Required</small></div><div class="control-group" ng-class="{error: editForm.physical.$invalid}" ng-show="user.id == device.creator_id"><div class="input-prepend"><span class="add-on">Physical</span><input type="url" name="physical" ng-model="device.physical"><br/></div><small ng-show="!editForm.physical.$error.url" class="help-inline">Set the physical device URI to connect</small><small ng-show="editForm.physical.$error.url" class="help-inline">Not a URL</small></div><div><button ng-click="update()" ng-disabled="editForm.$invalid || editForm.$pristine" class="update btn"><i class="icon-pencil"></i> Update</button><button ng-click="clear()" ng-disabled="editForm.$pristine" class="cancel btn"><i class="icon-refresh"></i> Cancel</button></div></form></div></div><div class="dc-destroy" ng-show="user.id == device.creator_id"><hr/><div><p class="lead">Delete Device</p><form name="destroyForm"><div class="control-group" ng-class="{error: confirm!=device.name}"><div class="input-prepend"><span class="add-on">Device name</span><input class="input-medium" type="text" name="name" ng-model="confirm"><br/></div><small class="help-inline">Deleting your device is irreversible. Enter your device name to confirm you want to permanently delete it.</small></div><div><button ng-click="destroy()" ng-disabled="confirm!=device.name" class="destroy btn btn-danger"><i class="icon-white icon-remove"></i> Delete Device</button></div></form></div></div></div></div></div>',a={restrict:"EA",replace:!0,template:o,scope:{deviceId:"=",deviceJson:"=",deviceType:"=",deviceView:"@",deviceWidth:"=",deviceOptions:"@"}};return a.link=function(o){o.action={main:!0},o.loaded=!1,o.user=n.get(),o.$watch("deviceId",function(){o.deviceId&&(o.device=e.get({id:o.deviceId},a))}),o.$watch("deviceJson",function(){o.deviceJson&&(o.device=o.deviceJson,o.type=null,a())}),o.$watch("deviceType",function(e,t){o.deviceType&&(o.type=o.deviceType),e!=t&&(d(),l())}),o.$watch("deviceView",function(){o.list="list"==o.deviceView,o.extended="compact"==o.deviceView?!1:!0,o.extended="list"==o.deviceView?!1:o.extended}),o.$watch("deviceWidth",function(){o.width=o.deviceWidth?o.deviceWidth:300}),o.$watch("deviceOptions",function(){o.options=o.deviceOptions?o.deviceOptions:!0,"list"!=o.deviceView||o.deviceOptions||(o.options=!1)});var a=function(){o.deviceType&&(o.type=o.deviceType),o.type?c():o.type=t.get({id:o.device.type.id},c)},c=function(){d(),l(),i(k,0),o.loaded=!0},l=function(e){o.loaded&&e&&w(),s(),p(),g(),m()};o.showSettings=function(){o.action={settings:!0}},o.showMain=function(){o.action={main:!0}},o.compact=function(){o.extended=!1,o.action={main:!0}},o.extend=function(){o.extended=!0,o.action={main:!0}},o.execute=function(e){e.hasForm?e.visible=!e.visible:o.updateProperties(e.properties),m(e.id)},o.updateProperties=function(t){var n=new e({id:o.device.id,properties:t});n.$properties({},function(){o.device=n,l()}),o.device.pending=!0,$()},o.refresh=function(){o.device.pending=!0,o.refreshing=e.get({id:o.device.id},l)},o.update=function(){o.device.$update(function(){l(),o.showMain(),o.editForm.$setPristine()})},o.destroy=function(){o.device.$delete(function(){o.destroyed=!0,y()})},o.clear=function(){o.device.name=o.original.name,o.device.physical=o.original.physical,o.editForm.$setPristine()};var s=function(){o.refreshing&&(o.device=o.refreshing),u(),o.device.physical&&(o.device.physical=o.device.physical.uri),f(o.device.properties,o.type.properties),o.original=angular.copy(o.device)},u=function(){o.device.updated_at_relative=new Date(o.device.updated_at).toRelativeTime(5e3),i(u,6e4)},p=function(){_.each(o.functions,function(e){f(e.properties,o.type.properties),_.each(e.properties,function(e){e.visible&&(e.value=h(e.id,o.device.properties).value)})})},d=function(){o.functions=angular.copy(o.type.functions),_.each(o.functions,function(e){_.each(e.properties,function(e){e.visible=null==e.value}),e.hasForm=_.reduce(e.properties,function(e,t){return e||t.visible},!1)})},f=function(e,t){_.each(e,function(e){angular.extend(e,h(e.id,t))})},h=function(e,t){var n={id:"undefined",name:"Undefined"};return n=_.find(t,function(t){return t.id==e})},g=function(){o.status={name:"undefined"},_.each(o.type.statuses,function(e){_.each(e.properties,function(t){var n=t.values,r=h(t.id,o.device.properties).value;_.contains(n,r)&&v(e)})})},v=function(e){o.status=e,o.status.function=h(o.status.function.id,o.functions)},m=function(e){_.each(o.functions,function(t){t.id!=e&&(t.visible=!1)})};o.fireOpen=function(){r.$broadcast("lelylan:device:open",o.device)};var y=function(){r.$broadcast("lelylan:device:delete",o.device)},$=function(){r.$broadcast("lelylan:device:request:start",o.device)},w=function(){r.$broadcast("lelylan:device:request:end",o.device)};o.$on("lelylan:device:request:start",function(e,t){b(t)}),o.$on("lelylan:device:request:end",function(e,t){b(t)});var b=function(e){e.id==o.device.id&&(o.device.properties=e.properties,o.device.pending=e.pending,l(!1))},k=function(){var e=new CanvasLoader("pending-"+o.$id+"-"+o.device.id);e.setColor("#01cf9e"),e.setDiameter(20),e.setDensity(70),e.setRange(.7),e.setSpeed(2),e.setFPS(35),e.show()}},a}]),directives.config(["$locationProvider",function(e){e.html5Mode(!0).hashPrefix("!")}]),Date.prototype.toRelativeTime=function(){var e=function(e){var o=t(e),a=o.now||new Date,c=a-this,l=0>=c;if(c=Math.abs(c),o.nowThreshold>=c)return l?"Just now":"Just now";if(o.smartDays&&6*i>=c)return n(this,a);var s=null;for(var u in r){if(r[u]>c)break;s=u,c/=r[u]}return c=Math.floor(c),1!==c&&(s+="s"),[c,s,l?"from now":"ago"].join(" ")},t=function(e){return e||(e=0),"string"==typeof e&&(e=parseInt(e,10)),"number"==typeof e?(isNaN(e)&&(e=0),{nowThreshold:e}):e},n=function(e,t){var n,r=e.getDay(),i=r-t.getDay();return n=0==i?"Today":-1==i?"Yesterday":1==i&&e>t?"Tomorrow":o[r],n+" at "+e.toLocaleTimeString()},r={millisecond:1,second:1e3,minute:60,hour:60,day:24,month:30,year:12},i=r.millisecond*r.second*r.minute*r.hour*r.day,o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e}(),Date.fromString=function(e){return new Date(Date.parse(e))},function(e){var t,n=function(e,t){void 0===t&&(t={}),this.init(e,t)},r=n.prototype,i=["canvas","vml"],o=["oval","spiral","square","rect","roundRect"],a=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,c=-1!==navigator.appVersion.indexOf("MSIE")&&8===parseFloat(navigator.appVersion.split("MSIE")[1])?!0:!1,l=!!document.createElement("canvas").getContext,s=!0,u=function(e,t,n){var r,e=document.createElement(e);for(r in n)e[r]=n[r];return void 0!==t&&t.appendChild(e),e},p=function(e,t){for(var n in t)e.style[n]=t[n];return e},d=function(e,t){for(var n in t)e.setAttribute(n,t[n]);return e},f=function(e,t,n,r){e.save(),e.translate(t,n),e.rotate(r),e.translate(-t,-n),e.beginPath()};r.init=function(e,r){"boolean"==typeof r.safeVML&&(s=r.safeVML);try{this.mum=void 0!==document.getElementById(e)?document.getElementById(e):document.body}catch(o){this.mum=document.body}if(r.id=void 0!==r.id?r.id:"canvasLoader",this.cont=u("div",this.mum,{id:r.id}),l)t=i[0],this.can=u("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=p(u("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{if(t=i[1],void 0===n.vmlSheet){document.getElementsByTagName("head")[0].appendChild(u("style")),n.vmlSheet=document.styleSheets[document.styleSheets.length-1];var a,c=["group","oval","roundrect","fill"];for(a in c)n.vmlSheet.addRule(c[a],"behavior:url(#default#VML); position:absolute;")}this.vml=u("group",this.cont)}this.setColor(this.color),this.draw(),p(this.cont,{display:"none"})},r.cont={},r.can={},r.con={},r.cCan={},r.cCon={},r.timer={},r.activeId=0,r.diameter=40,r.setDiameter=function(e){this.diameter=Math.round(Math.abs(e)),this.redraw()},r.getDiameter=function(){return this.diameter},r.cRGB={},r.color="#000000",r.setColor=function(e){this.color=a.test(e)?e:"#000000",this.cRGB=this.getRGB(this.color),this.redraw()},r.getColor=function(){return this.color},r.shape=o[0],r.setShape=function(e){for(var t in o)if(e===o[t]){this.shape=e,this.redraw();break}},r.getShape=function(){return this.shape},r.density=40,r.setDensity=function(e){this.density=s&&t===i[1]?40>=Math.round(Math.abs(e))?Math.round(Math.abs(e)):40:Math.round(Math.abs(e)),this.density>360&&(this.density=360),this.activeId=0,this.redraw()},r.getDensity=function(){return this.density},r.range=1.3,r.setRange=function(e){this.range=Math.abs(e),this.redraw()},r.getRange=function(){return this.range},r.speed=2,r.setSpeed=function(e){this.speed=Math.round(Math.abs(e))},r.getSpeed=function(){return this.speed},r.fps=24,r.setFPS=function(e){this.fps=Math.round(Math.abs(e)),this.reset()},r.getFPS=function(){return this.fps},r.getRGB=function(e){return e="#"===e.charAt(0)?e.substring(1,7):e,{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},r.draw=function(){var e,n,r,a,l,s,h,g,v,m=0,y=this.density,$=Math.round(y*this.range),w=0;v=this.cCon;var b=this.diameter;if(t===i[0])for(v.clearRect(0,0,1e3,1e3),d(this.can,{width:b,height:b}),d(this.cCan,{width:b,height:b});y>m;){switch(g=$>=m?1-1/$*m:g=0,s=270-360/y*m,h=s/180*Math.PI,v.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+(""+g)+")",this.shape){case o[0]:case o[1]:e=.07*b,a=.47*b+Math.cos(h)*(.47*b-e)-.47*b,l=.47*b+Math.sin(h)*(.47*b-e)-.47*b,v.beginPath(),this.shape===o[1]?v.arc(.5*b+a,.5*b+l,e*g,0,2*Math.PI,!1):v.arc(.5*b+a,.5*b+l,e,0,2*Math.PI,!1);break;case o[2]:e=.12*b,a=Math.cos(h)*(.47*b-e)+.5*b,l=Math.sin(h)*(.47*b-e)+.5*b,f(v,a,l,h),v.fillRect(a,l-.5*e,e,e);break;case o[3]:case o[4]:n=.3*b,r=.27*n,a=Math.cos(h)*(r+.13*(b-r))+.5*b,l=Math.sin(h)*(r+.13*(b-r))+.5*b,f(v,a,l,h),this.shape===o[3]?v.fillRect(a,l-.5*r,n,r):(e=.55*r,v.moveTo(a+e,l-.5*r),v.lineTo(a+n-e,l-.5*r),v.quadraticCurveTo(a+n,l-.5*r,a+n,l-.5*r+e),v.lineTo(a+n,l-.5*r+r-e),v.quadraticCurveTo(a+n,l-.5*r+r,a+n-e,l-.5*r+r),v.lineTo(a+e,l-.5*r+r),v.quadraticCurveTo(a,l-.5*r+r,a,l-.5*r+r-e),v.lineTo(a,l-.5*r+e),v.quadraticCurveTo(a,l-.5*r,a+e,l-.5*r))}v.closePath(),v.fill(),v.restore(),++m}else{switch(p(this.cont,{width:b,height:b}),p(this.vml,{width:b,height:b}),this.shape){case o[0]:case o[1]:h="oval",e=140;break;case o[2]:h="roundrect",e=120;break;case o[3]:case o[4]:h="roundrect",e=300}for(n=r=e,a=500-r,l=.5*-r;y>m;){switch(g=$>=m?1-1/$*m:g=0,s=270-360/y*m,this.shape){case o[1]:n=r=e*g,a=500-.5*e-.5*e*g,l=.5*(e-e*g);break;case o[0]:case o[2]:c&&(l=0,this.shape===o[2]&&(a=500-.5*r));break;case o[3]:case o[4]:n=.95*e,r=.28*n,c?(a=0,l=500-.5*r):(a=500-n,l=.5*-r),w=this.shape===o[4]?.6:0}v=d(p(u("group",this.vml),{width:1e3,height:1e3,rotation:s}),{coordsize:"1000,1000",coordorigin:"-500,-500"}),v=p(u(h,v,{stroked:!1,arcSize:w}),{width:n,height:r,top:l,left:a}),u("fill",v,{color:this.color,opacity:g}),++m}}this.tick(!0)},r.clean=function(){if(t===i[0])this.con.clearRect(0,0,1e3,1e3);else{var e=this.vml;if(e.hasChildNodes())for(;e.childNodes.length>=1;)e.removeChild(e.firstChild)}},r.redraw=function(){this.clean(),this.draw()},r.reset=function(){"number"==typeof this.timer&&(this.hide(),this.show())},r.tick=function(e){var n=this.con,r=this.diameter;e||(this.activeId+=360/this.density*this.speed),t===i[0]?(n.clearRect(0,0,r,r),f(n,.5*r,.5*r,this.activeId/180*Math.PI),n.drawImage(this.cCan,0,0,r,r),n.restore()):(this.activeId>=360&&(this.activeId-=360),p(this.vml,{rotation:this.activeId}))},r.show=function(){if("number"!=typeof this.timer){var e=this;this.timer=self.setInterval(function(){e.tick()},Math.round(1e3/this.fps)),p(this.cont,{display:"block"})}},r.hide=function(){"number"==typeof this.timer&&(clearInterval(this.timer),delete this.timer,p(this.cont,{display:"none"}))},r.kill=function(){var e=this.cont;"number"==typeof this.timer&&this.hide(),t===i[0]?(e.removeChild(this.can),e.removeChild(this.cCan)):e.removeChild(this.vml);for(var n in this)delete this[n]},e.CanvasLoader=n}(window),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,o=Function.prototype,a=r.push,c=r.slice,l=r.concat,s=i.toString,u=i.hasOwnProperty,p=r.forEach,d=r.map,f=r.reduce,h=r.reduceRight,g=r.filter,v=r.every,m=r.some,y=r.indexOf,$=r.lastIndexOf,w=Array.isArray,b=Object.keys,k=o.bind,C=function(e){return e instanceof C?e:this instanceof C?(this._wrapped=e,void 0):new C(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.4.4";var x=C.each=C.forEach=function(e,t,r){if(null!=e)if(p&&e.forEach===p)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,o=e.length;o>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var a in e)if(C.has(e,a)&&t.call(r,e[a],a,e)===n)return};C.map=C.collect=function(e,t,n){var r=[];return null==e?r:d&&e.map===d?e.map(t,n):(x(e,function(e,i,o){r[r.length]=t.call(n,e,i,o)}),r)};var T="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return r&&(t=C.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(x(e,function(e,o,a){i?n=t.call(r,n,e,o,a):(n=e,i=!0)}),!i)throw new TypeError(T);return n},C.reduceRight=C.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),h&&e.reduceRight===h)return r&&(t=C.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=C.keys(e);o=a.length}if(x(e,function(c,l,s){l=a?a[--o]:--o,i?n=t.call(r,n,e[l],l,s):(n=e[l],i=!0)}),!i)throw new TypeError(T);return n},C.find=C.detect=function(e,t,n){var r;return E(e,function(e,i,o){return t.call(n,e,i,o)?(r=e,!0):void 0}),r},C.filter=C.select=function(e,t,n){var r=[];return null==e?r:g&&e.filter===g?e.filter(t,n):(x(e,function(e,i,o){t.call(n,e,i,o)&&(r[r.length]=e)}),r)},C.reject=function(e,t,n){return C.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},C.every=C.all=function(e,t,r){t||(t=C.identity);var i=!0;return null==e?i:v&&e.every===v?e.every(t,r):(x(e,function(e,o,a){return(i=i&&t.call(r,e,o,a))?void 0:n}),!!i)};var E=C.some=C.any=function(e,t,r){t||(t=C.identity);var i=!1;return null==e?i:m&&e.some===m?e.some(t,r):(x(e,function(e,o,a){return i||(i=t.call(r,e,o,a))?n:void 0}),!!i)};C.contains=C.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):E(e,function(e){return e===t})},C.invoke=function(e,t){var n=c.call(arguments,2),r=C.isFunction(t);return C.map(e,function(e){return(r?t:e[t]).apply(e,n)})},C.pluck=function(e,t){return C.map(e,function(e){return e[t]})},C.where=function(e,t,n){return C.isEmpty(t)?n?null:[]:C[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},C.findWhere=function(e,t){return C.where(e,t,!0)},C.max=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&C.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return x(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a>=r.computed&&(r={value:e,computed:a})}),r.value},C.min=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&C.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return x(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;r.computed>a&&(r={value:e,computed:a})}),r.value},C.shuffle=function(e){var t,n=0,r=[];return x(e,function(e){t=C.random(n++),r[n-1]=r[t],r[t]=e}),r};var S=function(e){return C.isFunction(e)?e:function(t){return t[e]}};C.sortBy=function(e,t,n){var r=S(t);return C.pluck(C.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var _=function(e,t,n,r){var i={},o=S(t||C.identity);return x(e,function(t,a){var c=o.call(n,t,a,e);r(i,c,t)}),i};C.groupBy=function(e,t,n){return _(e,t,n,function(e,t,n){(C.has(e,t)?e[t]:e[t]=[]).push(n)})},C.countBy=function(e,t,n){return _(e,t,n,function(e,t){C.has(e,t)||(e[t]=0),e[t]++})},C.sortedIndex=function(e,t,n,r){n=null==n?C.identity:S(n);for(var i=n.call(r,t),o=0,a=e.length;a>o;){var c=o+a>>>1;i>n.call(r,e[c])?o=c+1:a=c}return o},C.toArray=function(e){return e?C.isArray(e)?c.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:c.call(e,0,t)},C.initial=function(e,t,n){return c.call(e,0,e.length-(null==t||n?1:t))},C.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var P=function(e,t,n){return x(e,function(e){C.isArray(e)?t?a.apply(n,e):P(e,t,n):n.push(e)}),n};C.flatten=function(e,t){return P(e,t,[])},C.without=function(e){return C.difference(e,c.call(arguments,1))},C.uniq=C.unique=function(e,t,n,r){C.isFunction(t)&&(r=n,n=t,t=!1);var i=n?C.map(e,n,r):e,o=[],a=[];return x(i,function(n,r){(t?r&&a[a.length-1]===n:C.contains(a,n))||(a.push(n),o.push(e[r]))}),o},C.union=function(){return C.uniq(l.apply(r,arguments))},C.intersection=function(e){var t=c.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.indexOf(t,e)>=0})})},C.difference=function(e){var t=l.apply(r,c.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=c.call(arguments),t=C.max(C.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=C.pluck(e,""+r);return n},C.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},C.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=C.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},C.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if($&&e.lastIndexOf===$)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},C.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=Array(r);r>i;)o[i++]=e,e+=n;return o},C.bind=function(e,t){if(e.bind===k&&k)return k.apply(e,c.call(arguments,1));var n=c.call(arguments,2);return function(){return e.apply(t,n.concat(c.call(arguments)))}},C.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},C.bindAll=function(e){var t=c.call(arguments,1);return 0===t.length&&(t=C.functions(e)),x(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var n={};return t||(t=C.identity),function(){var r=t.apply(this,arguments);return C.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},C.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(c.call(arguments,1)))},C.throttle=function(e,t){var n,r,i,o,a=0,c=function(){a=new Date,i=null,o=e.apply(n,r)};return function(){var l=new Date,s=t-(l-a);return n=this,r=arguments,0>=s?(clearTimeout(i),i=null,a=l,o=e.apply(n,r)):i||(i=setTimeout(c,s)),o}},C.debounce=function(e,t,n){var r,i;return function(){var o=this,a=arguments,c=function(){r=null,n||(i=e.apply(o,a))},l=n&&!r;return clearTimeout(r),r=setTimeout(c,t),l&&(i=e.apply(o,a)),i}},C.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},C.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},C.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},C.keys=b||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)C.has(e,n)&&(t[t.length]=n);return t},C.values=function(e){var t=[];for(var n in e)C.has(e,n)&&t.push(e[n]);return t},C.pairs=function(e){var t=[];for(var n in e)C.has(e,n)&&t.push([n,e[n]]);return t},C.invert=function(e){var t={};for(var n in e)C.has(e,n)&&(t[e[n]]=n);return t},C.functions=C.methods=function(e){var t=[];for(var n in e)C.isFunction(e[n])&&t.push(n);return t.sort()},C.extend=function(e){return x(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},C.pick=function(e){var t={},n=l.apply(r,c.call(arguments,1));return x(n,function(n){n in e&&(t[n]=e[n])}),t},C.omit=function(e){var t={},n=l.apply(r,c.call(arguments,1));for(var i in e)C.contains(n,i)||(t[i]=e[i]);return t},C.defaults=function(e){return x(c.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var D=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var i=s.call(e);if(i!=s.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return r[o]==t;n.push(e),r.push(t);var a=0,c=!0;if("[object Array]"==i){if(a=e.length,c=a==t.length)for(;a--&&(c=D(e[a],t[a],n,r)););}else{var l=e.constructor,u=t.constructor;if(l!==u&&!(C.isFunction(l)&&l instanceof l&&C.isFunction(u)&&u instanceof u))return!1;for(var p in e)if(C.has(e,p)&&(a++,!(c=C.has(t,p)&&D(e[p],t[p],n,r))))break;if(c){for(p in t)if(C.has(t,p)&&!a--)break;c=!a}}return n.pop(),r.pop(),c};C.isEqual=function(e,t){return D(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=w||function(e){return"[object Array]"==s.call(e)},C.isObject=function(e){return e===Object(e)},x(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return s.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),!0&&(C.isFunction=function(e){return"function"==typeof e}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==s.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return u.call(e,t)},C.noConflict=function(){return e._=t,this},C.identity=function(e){return e},C.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=C.invert(F.escape);var q={escape:RegExp("["+C.keys(F.escape).join("")+"]","g"),unescape:RegExp("("+C.keys(F.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(q[e],function(t){return F[e][t]})}}),C.result=function(e,t){if(null==e)return null;var n=e[t];return C.isFunction(n)?n.call(e):n},C.mixin=function(e){x(C.functions(e),function(t){var n=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];
return a.apply(e,arguments),U.call(this,n.apply(C,e))}})};var R=0;C.uniqueId=function(e){var t=++R+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,n){var r;n=C.defaults({},n,C.templateSettings);var i=RegExp([(n.escape||A).source,(n.interpolate||A).source,(n.evaluate||A).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,n,r,i,c){return a+=e.slice(o,c).replace(O,function(e){return"\\"+M[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=c+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=Function(n.variable||"obj","_",a)}catch(c){throw c.source=a,c}if(t)return r(t,C);var l=function(e){return r.call(this,e,C)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},C.chain=function(e){return C(e).chain()};var U=function(e){return this._chain?C(e).chain():e};C.mixin(C),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];C.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],U.call(this,n)}}),x(["concat","join","slice"],function(e){var t=r[e];C.prototype[e]=function(){return U.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this);var Showdown={extensions:{}},forEach=Showdown.forEach=function(e,t){if("function"==typeof e.forEach)e.forEach(t);else{var n,r=e.length;for(n=0;r>n;n++)t(e[n],n,e)}},stdExtName=function(e){return e.replace(/[_-]||\s/g,"").toLowerCase()};Showdown.converter=function(e){var t,n,r,i=0,o=[],a=[];if("undefind"!=typeof module&&"undefined"!=typeof exports&&"undefind"!=typeof require){var c=require("fs");if(c){var l=c.readdirSync((__dirname||".")+"/extensions").filter(function(e){return~e.indexOf(".js")}).map(function(e){return e.replace(/\.js$/,"")});Showdown.forEach(l,function(e){var t=stdExtName(e);Showdown.extensions[t]=require("./extensions/"+e)})}}if(this.makeHtml=function(e){return t={},n={},r=[],e=e.replace(/~/g,"~T"),e=e.replace(/\$/g,"~D"),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e="\n\n"+e+"\n\n",e=I(e),e=e.replace(/^[ \t]+$/gm,""),Showdown.forEach(o,function(t){e=p(t,e)}),e=T(e),e=f(e),e=d(e),e=g(e),e=O(e),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~"),Showdown.forEach(a,function(t){e=p(t,e)}),e},e&&e.extensions){var s=this;Showdown.forEach(e.extensions,function(e){if("string"==typeof e&&(e=Showdown.extensions[stdExtName(e)]),"function"!=typeof e)throw"Extension '"+e+"' could not be loaded.  It was either not found or is not a valid extension.";Showdown.forEach(e(s),function(e){e.type?"language"===e.type||"lang"===e.type?o.push(e):("output"===e.type||"html"===e.type)&&a.push(e):a.push(e)})})}var u,p=function(e,t){if(e.regex){var n=RegExp(e.regex,"g");return t.replace(n,e.replace)}return e.filter?e.filter(t):void 0},d=function(e){return e+="~0",e=e.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(e,r,i,o,a){return r=r.toLowerCase(),t[r]=q(i),o?o+a:(a&&(n[r]=a.replace(/"/g,"&quot;")),"")}),e=e.replace(/~0/,"")},f=function(e){return e=e.replace(/\n/g,"\n\n"),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,h),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,h),e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,h),e=e.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,h),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,h),e=e.replace(/\n\n/g,"\n")},h=function(e,t){var n=t;return n=n.replace(/\n\n/g,"\n"),n=n.replace(/^\n/,""),n=n.replace(/\n+$/g,""),n="\n\n~K"+(r.push(n)-1)+"K\n\n"},g=function(e){e=k(e);var t=E("<hr />");return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,t),e=C(e),e=x(e),e=D(e),e=f(e),e=F(e)},v=function(e){return e=S(e),e=m(e),e=R(e),e=w(e),e=y(e),e=A(e),e=q(e),e=P(e),e=e.replace(/  +\n/g," <br />\n")},m=function(e){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return e=e.replace(t,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=j(t,"\\`*_")})},y=function(e){return e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,$),e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,$),e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,$)},$=function(e,r,i,o,a,c,l,s){void 0==s&&(s="");var u=r,p=i,d=o.toLowerCase(),f=a,h=s;if(""==f)if(""==d&&(d=p.toLowerCase().replace(/ ?\n/g," ")),f="#"+d,void 0!=t[d])f=t[d],void 0!=n[d]&&(h=n[d]);else{if(!(u.search(/\(\s*\)$/m)>-1))return u;f=""}f=j(f,"*_");var g='<a href="'+f+'"';return""!=h&&(h=h.replace(/"/g,"&quot;"),h=j(h,"*_"),g+=' title="'+h+'"'),g+=">"+p+"</a>"},w=function(e){return e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,b),e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,b)},b=function(e,r,i,o,a,c,l,s){var u=r,p=i,d=o.toLowerCase(),f=a,h=s;if(h||(h=""),""==f){if(""==d&&(d=p.toLowerCase().replace(/ ?\n/g," ")),f="#"+d,void 0==t[d])return u;f=t[d],void 0!=n[d]&&(h=n[d])}p=p.replace(/"/g,"&quot;"),f=j(f,"*_");var g='<img src="'+f+'" alt="'+p+'"';return h=h.replace(/"/g,"&quot;"),h=j(h,"*_"),g+=' title="'+h+'"',g+=" />"},k=function(e){function t(e){return e.replace(/[^\w]/g,"").toLowerCase()}return e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,n){return E('<h1 id="'+t(n)+'">'+v(n)+"</h1>")}),e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,n){return E('<h2 id="'+t(n)+'">'+v(n)+"</h2>")}),e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,n,r){var i=n.length;return E("<h"+i+' id="'+t(r)+'">'+v(r)+"</h"+i+">")})},C=function(e){e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return i?e=e.replace(t,function(e,t,n){var r=t,i=n.search(/[*+-]/g)>-1?"ul":"ol";r=r.replace(/\n{2,}/g,"\n\n\n");var o=u(r);return o=o.replace(/\s+$/,""),o="<"+i+">"+o+"</"+i+">\n"}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(t,function(e,t,n,r){var i=t,o=n,a=r.search(/[*+-]/g)>-1?"ul":"ol",o=o.replace(/\n{2,}/g,"\n\n\n"),c=u(o);return c=i+"<"+a+">\n"+c+"</"+a+">\n"})),e=e.replace(/~0/,"")};u=function(e){return i++,e=e.replace(/\n{2,}$/,"\n"),e+="~0",e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(e,t,n,r,i){var o=i,a=t;return a||o.search(/\n{2,}/)>-1?o=g(U(o)):(o=C(U(o)),o=o.replace(/\n$/,""),o=v(o)),"<li>"+o+"</li>\n"}),e=e.replace(/~0/g,""),i--,e};var x=function(e){return e+="~0",e=e.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var r=t,i=n;return r=_(U(r)),r=I(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code>"+r+"\n</code></pre>",E(r)+i}),e=e.replace(/~0/,"")},T=function(e){return e+="~0",e=e.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(e,t,n){var r=t,i=n;return i=_(i),i=I(i),i=i.replace(/^\n+/g,""),i=i.replace(/\n+$/g,""),i="<pre><code"+(r?' class="'+r+'"':"")+">"+i+"\n</code></pre>",E(i)}),e=e.replace(/~0/,"")},E=function(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(r.push(e)-1)+"K\n\n"},S=function(e){return e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,r){var i=r;return i=i.replace(/^([ \t]*)/g,""),i=i.replace(/[ \t]*$/g,""),i=_(i),t+"<code>"+i+"</code>"})},_=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=j(e,"*_{}[]\\",!1)},P=function(e){return e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),e=e.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},D=function(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;return n=n.replace(/^[ \t]*>[ \t]?/gm,"~0"),n=n.replace(/~0/g,""),n=n.replace(/^[ \t]+$/gm,""),n=g(n),n=n.replace(/(^|\n)/g,"$1  "),n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return n=n.replace(/^  /gm,"~0"),n=n.replace(/~0/g,"")}),E("<blockquote>\n"+n+"\n</blockquote>")})},F=function(e){e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");for(var t=e.split(/\n{2,}/g),n=[],i=t.length,o=0;i>o;o++){var a=t[o];a.search(/~K(\d+)K/g)>=0?n.push(a):a.search(/\S/)>=0&&(a=v(a),a=a.replace(/^([ \t]*)/g,"<p>"),a+="</p>",n.push(a))}i=n.length;for(var o=0;i>o;o++)for(;n[o].search(/~K(\d+)K/)>=0;){var c=r[RegExp.$1];c=c.replace(/\$/g,"$$$$"),n[o]=n[o].replace(/~K\d+K/,c)}return n.join("\n\n")},q=function(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},R=function(e){return e=e.replace(/\\(\\)/g,H),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,H)},A=function(e){return e=e.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),e=e.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(e,t){return M(O(t))})},M=function(e){var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e="mailto:"+e,e=e.replace(/./g,function(e){if("@"==e)e=t[Math.floor(2*Math.random())](e);else if(":"!=e){var n=Math.random();e=n>.9?t[2](e):n>.45?t[1](e):t[0](e)}return e}),e='<a href="'+e+'">'+e+"</a>",e=e.replace(/">.+:/g,'">')},O=function(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)})},U=function(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,"")},I=function(e){return e=e.replace(/\t(?=\t)/g,"    "),e=e.replace(/\t/g,"~A~B"),e=e.replace(/~B(.+?)~A/g,function(e,t){for(var n=t,r=4-n.length%4,i=0;r>i;i++)n+=" ";return n}),e=e.replace(/~A/g,"    "),e=e.replace(/~B/g,"")},j=function(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=RegExp(r,"g");return e=e.replace(i,H)},H=function(e,t){var n=t.charCodeAt(0);return"~E"+n+"E"}},"undefined"!=typeof module&&(module.exports=Showdown),"function"==typeof define&&define.amd&&define("showdown",function(){return Showdown}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.collapse","ui.bootstrap.dialog","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.popover","ui.bootstrap.tabs","ui.bootstrap.tooltip","ui.bootstrap.transition","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/dialog/message.html","template/pagination/pagination.html","template/popover/popover.html","template/tabs/pane.html","template/tabs/tabs.html","template/tooltip/tooltip-popup.html","template/typeahead/typeahead.html"]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(r){var i=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;i&&angular.forEach(this.groups,function(e){e!==r&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(this.groups.indexOf(e),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse","$transition","$timeout",function(e){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:["$scope",function(){this.setHeading=function(e){this.heading=e}}],link:function(t,n,r,i){var o,a;i.addGroup(t),t.isOpen=!1,r.isOpen&&(o=e(r.isOpen),a=o.assign,t.$watch(function(){return o(t.$parent)},function(e){t.isOpen=e}),t.isOpen=o?o(t.$parent):!1),t.$watch("isOpen",function(e){e&&i.closeOthers(t),a&&a(t.$parent,e)})}}}]).directive("accordionHeading",function(){return{restrict:"E",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(e,t,n){return function(e,t,r,i){i.setHeading(n(e,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,r){e.$watch(function(){return r[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).directive("alert",function(){return{restrict:"EA",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).directive("btnRadio",["buttonConfig",function(e){var t=e.activeClass||"active",n=e.toggleEvent||"click";return{require:"ngModel",link:function(e,r,i,o){var a=e.$eval(i.btnRadio);e.$watch(function(){return o.$modelValue},function(e){angular.equals(e,a)?r.addClass(t):r.removeClass(t)}),r.bind(n,function(){r.hasClass(t)||e.$apply(function(){o.$setViewValue(a)})})}}}]).directive("btnCheckbox",["buttonConfig",function(e){var t=e.activeClass||"active",n=e.toggleEvent||"click";return{require:"ngModel",link:function(e,r,i,o){var a=e.$eval(i.btnCheckboxTrue),c=e.$eval(i.btnCheckboxFalse);a=angular.isDefined(a)?a:!0,c=angular.isDefined(c)?c:!1,e.$watch(function(){return o.$modelValue},function(e){angular.equals(e,a)?r.addClass(t):r.removeClass(t)}),r.bind(n,function(){e.$apply(function(){o.$setViewValue(r.hasClass(t)?c:a)})})}}}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(e,t,n){function r(){function n(){o?(e.next(),r()):e.pause()}i&&t.cancel(i);var a=+e.interval;!isNaN(a)&&a>=0&&(i=t(n,a))}var i,o,a=this,c=a.slides=[],l=-1;a.currentSlide=null,a.select=function(i,o){function s(){a.currentSlide&&angular.isString(o)&&!e.noTransition&&i.$element?(i.$element.addClass(o),i.$element[0].offsetWidth=i.$element[0].offsetWidth,angular.forEach(c,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(i,{direction:o,active:!0,entering:!0}),angular.extend(a.currentSlide||{},{direction:o,leaving:!0}),e.$currentTransition=n(i.$element,{}),function(t,n){e.$currentTransition.then(function(){u(t,n)},function(){u(t,n)})}(i,a.currentSlide)):u(i,a.currentSlide),a.currentSlide=i,l=p,r()}function u(t,n){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(n||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var p=c.indexOf(i);void 0===o&&(o=p>l?"next":"prev"),i&&i!==a.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(s)):s())},a.indexOfSlide=function(e){return c.indexOf(e)},e.next=function(){var e=(l+1)%c.length;return a.select(c[e],"next")},e.prev=function(){var e=0>l-1?c.length-1:l-1;return a.select(c[e],"prev")},e.select=function(e){a.select(e)},e.isActive=function(e){return a.currentSlide===e},e.slides=function(){return c},e.$watch("interval",r),e.play=function(){o||(o=!0,r())},e.pause=function(){o=!1,i&&t.cancel(i)},a.addSlide=function(t,n){t.$element=n,c.push(t),1===c.length||t.active?(a.select(c[c.length-1]),1==c.length&&e.play()):t.active=!1},a.removeSlide=function(e){var t=c.indexOf(e);c.splice(t,1),c.length>0&&e.active&&(t>=c.length?a.select(c[t-1]):a.select(c[t]))}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"="}}}]).directive("slide",[function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"="},link:function(e,t,n,r){r.addSlide(e,t),e.$on("$destroy",function(){r.removeSlide(e)}),e.$watch("active",function(t){t&&r.select(e)})}}}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){var t=function(e,t,n){t.removeClass("collapse"),t.css({height:n}),t[0].offsetWidth,t.addClass("collapse")};return{link:function(n,r,i){var o,a=!0;n.$watch(function(){return r[0].scrollHeight},function(){0!==r[0].scrollHeight&&(o||(a?t(n,r,r[0].scrollHeight+"px"):t(n,r,"auto")))}),n.$watch(i.collapse,function(e){e?u():s()});var c,l=function(t){return c&&c.cancel(),c=e(r,t),c.then(function(){c=void 0},function(){c=void 0}),c},s=function(){a?(a=!1,o||t(n,r,"auto")):l({height:r[0].scrollHeight+"px"}).then(function(){o||t(n,r,"auto")}),o=!1},u=function(){o=!0,a?(a=!1,t(n,r,0)):(t(n,r,r[0].scrollHeight+"px"),l({height:"0"}))}}}}]);var dialogModule=angular.module("ui.bootstrap.dialog",["ui.bootstrap.transition"]);dialogModule.controller("MessageBoxController",["$scope","dialog","model",function(e,t,n){e.title=n.title,e.message=n.message,e.buttons=n.buttons,e.close=function(e){t.close(e)}}]),dialogModule.provider("$dialog",function(){var e={backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",dialogOpenClass:"modal-open",resolve:{},backdropFade:!1,dialogFade:!1,keyboard:!0,backdropClick:!0},t={},n={value:0};this.options=function(e){t=e},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function(r,i,o,a,c,l,s,u,p){function d(e){var t=angular.element("<div>");return t.addClass(e),t}function f(n){var r=this,i=this.options=angular.extend({},e,t,n);this.backdropEl=d(i.backdropClass),i.backdropFade&&(this.backdropEl.addClass(i.transitionClass),this.backdropEl.removeClass(i.triggerClass)),this.modalEl=d(i.dialogClass),i.dialogFade&&(this.modalEl.addClass(i.transitionClass),this.modalEl.removeClass(i.triggerClass)),this.handledEscapeKey=function(e){27===e.which&&(r.close(),e.preventDefault(),r.$scope.$apply())},this.handleBackDropClick=function(e){r.close(),e.preventDefault(),r.$scope.$apply()}}var h=i.find("body");return f.prototype.isOpen=function(){return this._open},f.prototype.open=function(e,t){var n=this,r=this.options;if(e&&(r.templateUrl=e),t&&(r.controller=t),!r.template&&!r.templateUrl)throw Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(e){var t=e.$scope=n.$scope=e.$scope?e.$scope:a.$new();if(n.modalEl.html(e.$template),n.options.controller){var r=c(n.options.controller,e);n.modalEl.contents().data("ngControllerController",r)}o(n.modalEl)(t),n._addElementsToDom(),h.addClass(n.options.dialogOpenClass),setTimeout(function(){n.options.dialogFade&&n.modalEl.addClass(n.options.triggerClass),n.options.backdropFade&&n.backdropEl.addClass(n.options.triggerClass)}),n._bindEvents()}),this.deferred=s.defer(),this.deferred.promise},f.prototype.close=function(e){function t(e){e.removeClass(r.options.triggerClass)}function n(){r._open&&r._onCloseComplete(e)}var r=this,i=this._getFadingElements();if(h.removeClass(r.options.dialogOpenClass),i.length>0)for(var o=i.length-1;o>=0;o--)u(i[o],t).then(n);else this._onCloseComplete(e)},f.prototype._getFadingElements=function(){var e=[];return this.options.dialogFade&&e.push(this.modalEl),this.options.backdropFade&&e.push(this.backdropEl),e},f.prototype._bindEvents=function(){this.options.keyboard&&h.bind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.bind("click",this.handleBackDropClick)},f.prototype._unbindEvents=function(){this.options.keyboard&&h.unbind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.unbind("click",this.handleBackDropClick)},f.prototype._onCloseComplete=function(e){this._removeElementsFromDom(),this._unbindEvents(),this.deferred.resolve(e)},f.prototype._addElementsToDom=function(){h.append(this.modalEl),this.options.backdrop&&(0===n.value&&h.append(this.backdropEl),n.value++),this._open=!0},f.prototype._removeElementsFromDom=function(){this.modalEl.remove(),this.options.backdrop&&(n.value--,0===n.value&&this.backdropEl.remove()),this._open=!1},f.prototype._loadResolves=function(){var e,t=[],n=[],i=this;return this.options.template?e=s.when(this.options.template):this.options.templateUrl&&(e=r.get(this.options.templateUrl,{cache:l}).then(function(e){return e.data})),angular.forEach(this.options.resolve||[],function(e,r){n.push(r),t.push(angular.isString(e)?p.get(e):p.invoke(e))}),n.push("$template"),t.push(e),s.all(t).then(function(e){var t={};return angular.forEach(e,function(e,r){t[n[r]]=e}),t.dialog=i,t})},{dialog:function(e){return new f(e)},messageBox:function(e,t,n){return new f({templateUrl:"template/dialog/message.html",controller:"MessageBoxController",resolve:{model:function(){return{title:e,message:t,buttons:n}}}})}}}]}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location","$window",function(e,t){var n,r=null;return{restrict:"CA",link:function(i,o){i.$watch(function(){return t.path()},function(){n&&n()}),o.parent().bind("click",function(){n&&n()}),o.bind("click",function(t){t.preventDefault(),t.stopPropagation();var i=!1;r&&(i=r===o,n()),i||(o.parent().addClass("open"),r=o,n=function(t){t&&(t.preventDefault(),t.stopPropagation()),e.unbind("click",n),o.parent().removeClass("open"),n=null,r=null},e.bind("click",n))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.dialog"]).directive("modal",["$parse","$dialog",function(e,t){return angular.element(document.getElementsByTagName("body")[0]),{restrict:"EA",terminal:!0,link:function(n,r,i){var o,a=angular.extend({},n.$eval(i.uiOptions||i.bsOptions||i.options)),c=i.modal||i.show;a=angular.extend(a,{template:r.html(),resolve:{$scope:function(){return n}}});var l=t.dialog(a);r.remove(),o=i.close?function(){e(i.close)(n)}:function(){angular.isFunction(e(c).assign)&&e(c).assign(n,!1)},n.$watch(c,function(e){e?l.open().then(function(){o()}):l.isOpen()&&l.close()})}}}]),angular.module("ui.bootstrap.pagination",[]).constant("paginationConfig",{boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last"}).directive("pagination",["paginationConfig",function(e){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",maxSize:"=",onSelectPage:"&"},templateUrl:"template/pagination/pagination.html",replace:!0,link:function(t,n,r){function i(e,t,n,r){return{number:e,text:t,active:n,disabled:r}}var o=angular.isDefined(r.boundaryLinks)?t.$eval(r.boundaryLinks):e.boundaryLinks,a=angular.isDefined(r.directionLinks)?t.$eval(r.directionLinks):e.directionLinks,c=angular.isDefined(r.firstText)?r.firstText:e.firstText,l=angular.isDefined(r.previousText)?r.previousText:e.previousText,s=angular.isDefined(r.nextText)?r.nextText:e.nextText,u=angular.isDefined(r.lastText)?r.lastText:e.lastText;t.$watch("numPages + currentPage + maxSize",function(){t.pages=[];var e=t.maxSize&&t.maxSize<t.numPages?t.maxSize:t.numPages,n=t.currentPage-Math.floor(e/2);1>n&&(n=1),n+e-1>t.numPages&&(n-=n+e-1-t.numPages);for(var r=n,p=n+e;p>r;r++){var d=i(r,r,t.isActive(r),!1);t.pages.push(d)}if(a){var f=i(t.currentPage-1,l,!1,t.noPrevious());t.pages.unshift(f);var h=i(t.currentPage+1,s,!1,t.noNext());t.pages.push(h)}if(o){var g=i(1,c,!1,t.noPrevious());t.pages.unshift(g);var v=i(t.numPages,u,!1,t.noNext());t.pages.push(v)}t.currentPage>t.numPages&&t.selectPage(t.numPages)}),t.noPrevious=function(){return 1===t.currentPage},t.noNext=function(){return t.currentPage===t.numPages},t.isActive=function(e){return t.currentPage===e},t.selectPage=function(e){!t.isActive(e)&&e>0&&t.numPages>=e&&(t.currentPage=e,t.onSelectPage({page:e}))}}}}]),angular.module("ui.bootstrap.popover",[]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{popoverTitle:"@",popoverContent:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$compile","$timeout","$parse","$window",function(e,t,n,r){var i='<popover-popup popover-title="{{tt_title}}" popover-content="{{tt_popover}}" placement="{{tt_placement}}" animation="tt_animation()" is-open="tt_isOpen"></popover-popup>';return{scope:!0,link:function(o,a,c){function l(){var e=a[0].getBoundingClientRect();return{width:a.prop("offsetWidth"),height:a.prop("offsetHeight"),top:e.top+r.pageYOffset,left:e.left+r.pageXOffset}}function s(){var e,n,r,i;switch(p&&t.cancel(p),d.css({top:0,left:0,display:"block"}),a.after(d),e=l(),n=d.prop("offsetWidth"),r=d.prop("offsetHeight"),o.tt_placement){case"right":i={top:e.top+e.height/2-r/2+"px",left:e.left+e.width+"px"};break;case"bottom":i={top:e.top+e.height+"px",left:e.left+e.width/2-n/2+"px"};break;case"left":i={top:e.top+e.height/2-r/2+"px",left:e.left-n+"px"};break;default:i={top:e.top-r+"px",left:e.left+e.width/2-n/2+"px"}}d.css(i),o.tt_isOpen=!0}function u(){o.tt_isOpen=!1,angular.isDefined(o.tt_animation)&&o.tt_animation()?p=t(function(){d.remove()},500):d.remove()}var p,d=e(i)(o);c.$observe("popover",function(e){o.tt_popover=e}),c.$observe("popoverTitle",function(e){o.tt_title=e}),c.$observe("popoverPlacement",function(e){o.tt_placement=e||"top"}),c.$observe("popoverAnimation",function(e){o.tt_animation=n(e)}),o.tt_isOpen=!1,a.bind("click",function(){o.tt_isOpen?o.$apply(u):o.$apply(s)})}}}]),angular.module("ui.bootstrap.tabs",[]).controller("TabsController",["$scope","$element",function(e){var t=e.panes=[];this.select=e.select=function(e){angular.forEach(t,function(e){e.selected=!1}),e.selected=!0},this.addPane=function(n){t.length||e.select(n),t.push(n)},this.removePane=function(n){var r=t.indexOf(n);t.splice(r,1),n.selected&&t.length>0&&e.select(t[t.length>r?r:r-1])}}]).directive("tabs",function(){return{restrict:"EA",transclude:!0,scope:{},controller:"TabsController",templateUrl:"template/tabs/tabs.html",replace:!0}}).directive("pane",["$parse",function(e){return{require:"^tabs",restrict:"EA",transclude:!0,scope:{heading:"@"},link:function(t,n,r,i){var o,a;t.selected=!1,r.active&&(o=e(r.active),a=o.assign,t.$watch(function(){return o(t.$parent)},function(e){t.selected=e}),t.selected=o?o(t.$parent):!1),t.$watch("selected",function(e){e&&i.select(t),a&&a(t.$parent,e)}),i.addPane(t),t.$on("$destroy",function(){i.removePane(t)})},templateUrl:"template/tabs/pane.html",replace:!0}}]),angular.module("ui.bootstrap.tooltip",[]).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{tooltipTitle:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$compile","$timeout","$parse","$window",function(e,t,n,r){var i='<tooltip-popup tooltip-title="{{tt_tooltip}}" placement="{{tt_placement}}" animation="tt_animation()" is-open="tt_isOpen"></tooltip-popup>';return{scope:!0,link:function(o,a,c){function l(){var e=a[0].getBoundingClientRect();return{width:a.prop("offsetWidth"),height:a.prop("offsetHeight"),top:e.top+r.pageYOffset,left:e.left+r.pageXOffset}}function s(){var e,n,r,i;if(o.tt_tooltip){switch(p&&t.cancel(p),d.css({top:0,left:0,display:"block"}),a.after(d),e=l(),n=d.prop("offsetWidth"),r=d.prop("offsetHeight"),o.tt_placement){case"right":i={top:e.top+e.height/2-r/2+"px",left:e.left+e.width+"px"};break;case"bottom":i={top:e.top+e.height+"px",left:e.left+e.width/2-n/2+"px"};break;case"left":i={top:e.top+e.height/2-r/2+"px",left:e.left-n+"px"};break;default:i={top:e.top-r+"px",left:e.left+e.width/2-n/2+"px"}}d.css(i),o.tt_isOpen=!0}}function u(){o.tt_isOpen=!1,angular.isDefined(o.tt_animation)&&o.tt_animation()?p=t(function(){d.remove()},500):d.remove()}var p,d=e(i)(o);c.$observe("tooltip",function(e){o.tt_tooltip=e}),c.$observe("tooltipPlacement",function(e){o.tt_placement=e||"top"}),c.$observe("tooltipAnimation",function(e){o.tt_animation=n(e)}),o.tt_isOpen=!1,a.bind("mouseenter",function(){o.$apply(s)}),a.bind("mouseleave",function(){o.$apply(u)})}}}]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){function r(e){for(var t in e)if(void 0!==o.style[t])return e[t]}var i=function(r,o,a){a=a||{};var c=e.defer(),l=i[a.animation?"animationEndEventName":"transitionEndEventName"],s=function(){n.$apply(function(){r.unbind(l,s),c.resolve(r)})};return l&&r.bind(l,s),t(function(){angular.isString(o)?r.addClass(o):angular.isFunction(o)?o(r):angular.isObject(o)&&r.css(o),l||c.resolve(r)}),c.promise.cancel=function(){l&&r.unbind(l,s),c.reject("Transition cancelled")},c.promise},o=document.createElement("trans"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},c={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",msTransition:"MSAnimationEnd",transition:"animationend"};return i.transitionEndEventName=r(a),i.animationEndEventName=r(c),i}]),angular.module("ui.bootstrap.typeahead",[]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(n){var r=n.match(t);if(!r)throw Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+n+"'.");return{itemName:r[3],source:e(r[4]),viewMapper:e(r[2]||r[1]),modelMapper:e(r[1])}}}}]).directive("typeahead",["$compile","$q","typeaheadParser",function(e,t,n){var r=[9,13,27,38,40];return{require:"ngModel",link:function(i,o,a,c){var l=c.$modelValue,s=i.$eval(a.typeaheadMinLength)||1,u=n.parse(a.typeahead),p=i.$new();i.$on("$destroy",function(){p.$destroy()});var d=function(){p.matches=[],p.activeIdx=-1},f=function(e){var n={$viewValue:e};t.when(u.source(p,n)).then(function(t){if(e===c.$viewValue)if(t.length>0){p.activeIdx=0,p.matches.length=0;for(var r=0;t.length>r;r++)n[u.itemName]=t[r],p.matches.push({label:u.viewMapper(p,n),model:t[r]});p.query=e}else d()},d)};d(),p.query=void 0,c.$parsers.push(function(e){return d(),l?e:(e&&e.length>=s&&f(e),void 0)}),c.$render=function(){var e={};e[u.itemName]=l,o.val(u.viewMapper(p,e)||c.$viewValue),l=void 0},p.select=function(e){var t={};t[u.itemName]=l=p.matches[e].model,c.$setViewValue(u.modelMapper(p,t)),c.$render()},o.bind("keydown",function(e){0!==p.matches.length&&-1!==r.indexOf(e.which)&&(e.preventDefault(),40===e.which?(p.activeIdx=(p.activeIdx+1)%p.matches.length,p.$digest()):38===e.which?(p.activeIdx=(p.activeIdx?p.activeIdx:p.matches.length)-1,p.$digest()):13===e.which||9===e.which?p.$apply(function(){p.select(p.activeIdx)}):27===e.which&&(p.matches=[],p.$digest()))});var h=e("<typeahead-popup matches='matches' active='activeIdx' select='select(activeIdx)' query='query'></typeahead-popup>")(p);o.after(h)}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead.html",link:function(e){e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})
}}}}).filter("typeaheadHighlight",function(){return function(e,t){return t?e.replace(RegExp(t,"gi"),"<strong>$&</strong>"):t}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="accordion-group">  <div class="accordion-heading" ><a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a></div>  <div class="accordion-body" collapse="!isOpen">    <div class="accordion-inner" ng-transclude></div>  </div></div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="accordion" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html","<div class='alert' ng-class='type && \"alert-\" + type'>    <button type='button' class='close' ng-click='close()'>&times;</button>    <div ng-transclude></div></div>")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">    <ol class="carousel-indicators">        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>    </ol>    <div class="carousel-inner" ng-transclude></div>    <a ng-click="prev()" class="carousel-control left">&lsaquo;</a>    <a ng-click="next()" class="carousel-control right">&rsaquo;</a></div>')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{    'active': leaving || (active && !entering),    'prev': (next || active) && direction=='prev',    'next': (next || active) && direction=='next',    'right': direction=='prev',    'left': direction=='next'  }\" class=\"item\" ng-transclude></div>")}]),angular.module("template/dialog/message.html",[]).run(["$templateCache",function(e){e.put("template/dialog/message.html",'<div class="modal-header">	<h1>{{ title }}</h1></div><div class="modal-body">	<p>{{ message }}</p></div><div class="modal-footer">	<button ng-repeat="btn in buttons" ng-click="close(btn.result)" class=btn ng-class="btn.cssClass">{{ btn.label }}</button></div>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<div class="pagination"><ul>  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>  </ul></div>')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">  <div class="arrow"></div>  <div class="popover-inner">      <h3 class="popover-title" ng-bind="popoverTitle" ng-show="popoverTitle"></h3>      <div class="popover-content" ng-bind="popoverContent"></div>  </div></div>')}]),angular.module("template/tabs/pane.html",[]).run(["$templateCache",function(e){e.put("template/tabs/pane.html",'<div class="tab-pane" ng-class="{active: selected}" ng-show="selected" ng-transclude></div>')}]),angular.module("template/tabs/tabs.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabs.html",'<div class="tabbable">  <ul class="nav nav-tabs">    <li ng-repeat="pane in panes" ng-class="{active:pane.selected}">      <a href="" ng-click="select(pane)">{{pane.heading}}</a>    </li>  </ul>  <div class="tab-content" ng-transclude></div></div>')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">  <div class="tooltip-arrow"></div>  <div class="tooltip-inner" ng-bind="tooltipTitle"></div></div>')}]),angular.module("template/typeahead/typeahead.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead.html",'<div class="dropdown clearfix" ng-class="{open: isOpen()}">    <ul class="typeahead dropdown-menu">        <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)">            <a tabindex="-1" ng-click="selectMatch($index)" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>        </li>    </ul></div>')}]),angular.module("lelylan.dashboards.types",["lelylan.components.type"]),angular.module("lelylan.dashboards.types").config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/home.html",controller:"DashboardCtrl"}).when("/new",{templateUrl:"views/new-type.html",controller:"CreateCtrl"}).when("/types",{templateUrl:"views/types.html",controller:"YoursCtrl"}).when("/popular",{templateUrl:"views/types.html",controller:"PopularCtrl"}).when("/categories/:category",{templateUrl:"views/types.html",controller:"CategoryCtrl"}).when("/types/:typeId",{templateUrl:"views/type.html",controller:"TypeCtrl"}).when("/learn",{templateUrl:"views/learn.html",controller:"DashboardCtrl"}).when("/how",{templateUrl:"views/how.html",controller:"DashboardCtrl"}).otherwise({redirectTo:"/"})}]),CategoryCtrl.$inject=["Type","$scope","$routeParams","$rootScope"],CreateCtrl.$inject=["Type","AccessToken","$scope","$routeParams","$rootScope","$location"],DashboardCtrl.$inject=["$scope","$rootScope","$http","$location","$timeout"];var cl=new CanvasLoader("lelylan-request-loading");cl.setColor("#239cbb"),cl.setShape("spiral"),cl.setDiameter(20),cl.setDensity(70),cl.setRange(.7),cl.setSpeed(2),cl.setFPS(35),cl.show(),PopularCtrl.$inject=["$scope","$rootScope"];var popularTypesList=[{uri:"http://api.lelylan.com/types/1",id:"1",name:"Basic Light",description:"The **Basic Light** type represents the most basic light structure.",categories:["lights"],created_at:"2012-09-01T15:01:22Z",updated_at:"2012-09-01T15:01:22Z"},{uri:"http://api.lelylan.com/types/2",id:"2",name:"Complex Light",description:"The **Comples Light** type represents the most complete light structure.",categories:["lights"],created_at:"2012-09-01T15:01:22Z",updated_at:"2012-09-01T15:01:22Z"}];YoursCtrl.$inject=["Type","AccessToken","$scope","$rootScope"],TypeCtrl.$inject=["$scope","$routeParams","$location"];