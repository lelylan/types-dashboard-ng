"use strict";function createHttpBackendMock(e,t,n){function r(e,t,n){return angular.isFunction(e)?e:function(){return angular.isNumber(e)?[e,t,n]:[200,e,t]}}function o(e,r,o,a,l){function p(e){return angular.isString(e)||angular.isFunction(e)||e instanceof RegExp?e:angular.toJson(e)}var d=new MockXhr,f=c[0],g=!1;if(f&&f.match(e,r)){if(!f.matchData(o))throw Error("Expected "+f+" with different data\n"+"EXPECTED: "+p(f.data)+"\nGOT:      "+o);if(!f.matchHeaders(l))throw Error("Expected "+f+" with different headers\n"+"EXPECTED: "+p(f.headers)+"\nGOT:      "+p(l));if(c.shift(),f.response)return u.push(function(){var t=f.response(e,r,o,l);d.$$respHeaders=t[2],a(t[0],t[1],d.getAllResponseHeaders())}),void 0;g=!0}for(var h,m=-1;h=i[++m];)if(h.match(e,r,o,l||{})){if(h.response)(n?n.defer:s)(function(){var t=h.response(e,r,o,l);d.$$respHeaders=t[2],a(t[0],t[1],d.getAllResponseHeaders())});else{if(!h.passThrough)throw Error("No response defined !");t(e,r,o,a,l)}return}throw g?Error("No response defined !"):Error("Unexpected request: "+e+" "+r+"\n"+(f?"Expected "+f:"No more request expected"))}function a(e){angular.forEach(["GET","DELETE","JSONP"],function(t){o[e+t]=function(n,r){return o[e](t,n,void 0,r)}}),angular.forEach(["PUT","POST","PATCH"],function(t){o[e+t]=function(n,r,a){return o[e](t,n,r,a)}})}var i=[],c=[],u=[],s=angular.bind(u,u.push);return o.when=function(e,t,o,a){var c=new MockHttpExpectation(e,t,o,a),u={respond:function(e,t,n){c.response=r(e,t,n)}};return n&&(u.passThrough=function(){c.passThrough=!0}),i.push(c),u},a("when"),o.expect=function(e,t,n,o){var a=new MockHttpExpectation(e,t,n,o);return c.push(a),{respond:function(e,t,n){a.response=r(e,t,n)}}},a("expect"),o.flush=function(t){if(e.$digest(),!u.length)throw Error("No pending request to flush !");if(angular.isDefined(t))for(;t--;){if(!u.length)throw Error("No more pending request to flush !");u.shift()()}else for(;u.length;)u.shift()();o.verifyNoOutstandingExpectation()},o.verifyNoOutstandingExpectation=function(){if(e.$digest(),c.length)throw Error("Unsatisfied requests: "+c.join(", "))},o.verifyNoOutstandingRequest=function(){if(u.length)throw Error("Unflushed requests: "+u.length)},o.resetExpectations=function(){c.length=0,u.length=0},o}function MockHttpExpectation(e,t,n,r){this.data=n,this.headers=r,this.match=function(t,n,r,o){return e!=t?!1:this.matchUrl(n)?angular.isDefined(r)&&!this.matchData(r)?!1:angular.isDefined(o)&&!this.matchHeaders(o)?!1:!0:!1},this.matchUrl=function(e){return t?angular.isFunction(t.test)?t.test(e):t==e:!0},this.matchHeaders=function(e){return angular.isUndefined(r)?!0:angular.isFunction(r)?r(e):angular.equals(r,e)},this.matchData=function(e){return angular.isUndefined(n)?!0:n&&angular.isFunction(n.test)?n.test(e):n&&!angular.isString(n)?angular.toJson(n)==e:n==e},this.toString=function(){return e+" "+t}}function MockXhr(){MockXhr.$$lastInstance=this,this.open=function(e,t,n){this.$$method=e,this.$$url=t,this.$$async=n,this.$$reqHeaders={},this.$$respHeaders={}},this.send=function(e){this.$$data=e},this.setRequestHeader=function(e,t){this.$$reqHeaders[e]=t},this.getResponseHeader=function(e){var t=this.$$respHeaders[e];return t?t:(e=angular.lowercase(e),(t=this.$$respHeaders[e])?t:(t=void 0,angular.forEach(this.$$respHeaders,function(n,r){t||angular.lowercase(r)!=e||(t=n)}),t))},this.getAllResponseHeaders=function(){var e=[];return angular.forEach(this.$$respHeaders,function(t,n){e.push(n+": "+t)}),e.join("\n")},this.abort=angular.noop}function CategoryCtrl(e,t,n,r){r.active=n.category,t.authorized=!0,t.loading=!0,t.types=e.public({categories:n.category},function(){t.loading=!1})}function CreateCtrl(e,t,n,r,o,a){o.active="create",n.authorized=!!t.get().access_token,n.type=new e,n.create=function(){n.type.$save(function(){o.active="yours",a.url("types/"+n.type.id)})}}function DashboardCtrl(e,t,n,r,o){t.active="",e.alerts=[],e.oauth={client:"49e0f0319b3c773b083c8e3da3b946a10ddf5485d2e3ceadf91428dfb3f05471",redirect:"http://t.lelylan.com",scope:"types"},e.$on("lelylan:logout",function(){t.active="",r.path("/")}),e.$on("lelylan:type:delete",function(n,a){t.active="yours",r.path("types"),e.alerts.push({type:"success",msg:a.name+" successfully deleted"}),o(function(){e.closeAlert(e.alerts.length-1)},1e4)}),e.closeAlert=function(t){e.alerts.splice(t,1)}}function PopularCtrl(e,t){t.active="popular",e.authorized=!0,e.loading=!1,e.types=popularTypesList}function YoursCtrl(e,t,n,r){r.active="yours",n.authorized=!!t.get().access_token,n.loading=!0,n.authorized&&(n.types=e.query({per:250},function(){n.loading=!1}))}function TypeCtrl(e,t){e.typeId=t.typeId}var app=angular.module("lelylan.components.type",["lelylan","ui.bootstrap","lelylan.components.device","lelylan.components.type.directive","lelylan.components.type.services.type","lelylan.components.type.services.property","lelylan.components.type.services.function","lelylan.components.type.services.status","lelylan.components.type.services.category","lelylan.components.type.services.simulation","lelylan.components.type.services.config","lelylan.components.type.services.helper","ngMockE2E"]),directives=angular.module("lelylan.components.type.directive",[]);directives.directive("lelylanType",["Type","Property","Function","Status","Simulation","LoggedUser","TCHelper","TCType","TCProperty","TCFunction","TCStatus","TCCategory","TCConfig","$rootScope","$compile","$templateCache","$timeout",function(e,t,n,r,o,a,i,c,u,s,l,p,d,f,g,h,m){var y={restrict:"EA",replace:!0,templateUrl:"/views/templates/type.html",scope:{typeId:"="}};return y.link=function(g){g.show={properties:!0},g.$watch("typeId",function(){g.typeId&&(g.type=e.get({id:g.typeId},h))}),g.init=function(){h()};var h=function(){g.original=angular.copy(g.type),g.user=a.get(),g.config=d,y(),g.loaded=!0},y=function(){c.initDescription(g.type),u.init(g.type),s.init(g.type),l.init(g.type),p.init(g.type)};g.initProperty=function(e){u.initProperty(e)},g.newProperty=function(){var e=angular.copy(d.base.property);g.type.properties.push(e),u.initProperty(e),g.open(e,"edit","Create")},g.updateProperty=function(e){""==e.acceptedString&&(e.acceptedString=null),e.accepted=angular.fromJson(e.acceptedString);var n=new t(e);n.$update(function(){g.close(e,"edit"),u.initProperty(e),h()})},g.createProperty=function(e){e.accepted=angular.fromJson(e.acceptedString),g.close(e,"edit"),delete e.temp;var n=new t(e);n.$save(function(){angular.extend(e,n),g.updateType(e,"properties")}),e.id=d.saving.message},g.deleteProperty=function(e){g.close(e,"delete");var n=new t(e);n.$delete(function(){T(e,"properties"),g.updateType(e,"properties")})},g.newFunction=function(){var e=angular.copy(d.base.function);g.type.functions.push(e),s.initFunction(e,g.type),g.open(e,"edit","Create")},g.updateFunction=function(e){var t=new n(e);t.$update(function(){g.close(e,"edit"),s.initFunction(e,g.type),h()})},g.createFunction=function(e){g.close(e,"edit"),delete e.temp;var t=new n(e);t.$save(function(){angular.extend(e,t),g.updateType(e,"functions")}),e.id=d.saving.message},g.deleteFunction=function(e){g.close(e,"delete");var t=new n(e);t.$delete(function(){T(e,"functions"),g.updateType(e,"functions")})},g.addFunctionProperty=function(e){e.properties.push({})},g.newStatus=function(){var e=angular.copy(d.base.status);g.type.statuses.push(e),l.initStatus(e,g.type),g.open(e,"edit","Create")},g.updateStatus=function(e){var t=new r(e);t.$update(function(){g.close(e,"edit"),l.initStatus(e,g.type),h()})},g.createStatus=function(e){g.close(e,"edit"),delete e.temp;var t=new r(e);m(function(){t.$save(function(){angular.extend(e,t),g.updateType(e,"statuses")})},1e3),e.id=d.saving.message},g.deleteStatus=function(e){g.close(e,"delete");var t=new r(e);t.$delete(function(){T(e,"statuses"),g.updateType(e,"statuses")})},g.addStatusProperty=function(e){e.properties.push({})},g.toggleCategory=function(t){var n=new e;n.id=g.type.id;var r=_.include(g.type.categories,t.name);r?g.type.categories=_.reject(g.type.categories,function(e){return e==t.name}):g.type.categories.push(t.name),n.categories=g.type.categories,n.$update(function(){g.type.categories=n.categories,h()})},g.updateType=function(t,n){var r=new e;r.id=g.type.id,r[n]=i.findIds(g.type[n]),r.$update(function(){g.type[n]=r[n],h()})},g.destroy=function(){g.type.$delete(function(){v(),g.destroyed=!0})},g.updateName=function(){var t=new e({id:g.type.id,name:g.type.name});t.$update(function(){g.type=t,h()}),g.config.inplace.name=!0,g.nameForm.$setPristine()},g.updateDescription=function(){var t=new e({id:g.type.id,description:g.type.description});t.$update(function(){g.type=t,h()}),g.config.inplace.description=!0,g.descriptionForm.$setPristine()},g.simulate=function(){g.simulatedDevice=o.set(g.type),g.simulatedType=new e(g.type)},g.showProperties=function(){g.show={properties:!0}},g.showFunctions=function(){g.show={functions:!0}},g.showStatuses=function(){g.show={statuses:!0}},g.showCategories=function(){g.show={categories:!0}},g.showSimulation=function(){g.show={simulation:!0},g.simulate()},g.showDelete=function(){g.show={"delete":!0}},g.close=function(e,t){e[t]=!1},g.open=function(e,t,n){g.modal={resource:e,visible:!0},e[t]=!0,e.label=n},g.reset=function(e,t,n){g.close(e,t,n),g.modal.visible&&(n&&n.$setPristine(),e.temp||$(e),e.temp&&w(e),g.modal.visible=!1)};var v=function(){f.$broadcast("lelylan:type:delete",g.type)},$=function(e){if("property"==g.modal.resource.isA&&angular.extend(e,i.findResource(e.id,g.original.properties)),"function"==g.modal.resource.isA&&e.id&&e.id!=d.saving.message){var t=i.findResource(e.id,g.original.functions);e.name=angular.copy(t.name),e.properties=angular.copy(t.properties)}if("status"==g.modal.resource.isA&&e.id&&e.id!=d.saving.message){var t=i.findResource(e.id,g.original.statuses);e.name=angular.copy(t.name),e.properties=angular.copy(t.properties),e.function=angular.copy(t.function)}y()},w=function(){m(function(){"property"==g.modal.resource.isA&&g.type.properties.pop(),"function"==g.modal.resource.isA&&g.type.functions.pop(),"status"==g.modal.resource.isA&&g.type.statuses.pop()},0)},T=function(e,t){g.type[t]=_.reject(g.type[t],function(t){return t.id==e.id})}},y}]);var service=angular.module("lelylan.components.type.services.type",[]);service.factory("TCType",[function(){var e={};return e.initDescription=function(e){var t=new Showdown.converter;e.shadowDescription=t.makeHtml(e.description)},e}]);var service=angular.module("lelylan.components.type.services.property",[]);service.factory("TCProperty",["TCConfig",function(e){var t={};return t.init=function(e){_.each(e.properties,function(e){e.isA="property",t.initProperty(e)})},t.initProperty=function(e){t.setPlaceholder(e),t.normalizeProperty(e)},t.setPlaceholder=function(t){t.placeholders=e.property.placeholders[t.type]},t.normalizeProperty=function(e){e.acceptedString=null,e.accepted&&angular.isObject(e.accepted)&&(e.acceptedList=JSON.stringify(e.accepted),e.acceptedList=_.map(e.accepted,function(e,t){return{key:t,value:e}}),e.acceptedString=JSON.stringify(e.accepted))},t}]);var service=angular.module("lelylan.components.type.services.function",[]);service.factory("TCFunction",["TCHelper",function(e){var t={};return t.init=function(e){_.each(e.functions,function(n){n.isA="function",t.initFunction(n,e)})},t.initFunction=function(t,n){e.extendResources(t.properties,n.properties)},t}]);var service=angular.module("lelylan.components.type.services.status",[]);service.factory("TCStatus",["TCHelper",function(e){var t={};return t.init=function(e){_.each(e.statuses,function(n){n.isA="status",t.initStatus(n,e)})},t.initStatus=function(t,n){t.function&&e.extendResources([t.function],n.functions),e.extendResources(t.properties,n.properties)},t}]);var service=angular.module("lelylan.components.type.services.category",[]);service.factory("TCCategory",["TCConfig",function(e){var t={};return t.init=function(t){_.each(e.categories,function(e){e.active=_.include(t.categories,e.name)})},t}]);var service=angular.module("lelylan.components.type.services.simulation",[]);service.factory("Simulation",["Device",function(e){var t,n={};return n.set=function(n){return t={uri:"http://api.lelylan.com/devices/1",id:"1",name:n.name,type:{uri:n.uri,id:n.id},physical:{uri:"http://arduino.house.com/1"},pending:!1,properties:[],created_at:new Date,updated_at:new Date,updated_from:{uri:"http://api.lelylan.com/users/1",name:"Lelylan"}},_.each(n.properties,function(e){var n={uri:e.uri,id:e.id,value:e.default,expected:e.default,pending:!1,suggested:angular.fromJson(e.suggested)};t.properties.push(n)}),new e(t)},n.get=function(){return t},n.update=function(e){e=angular.fromJson(e);var t=n.get();return e.name&&(t.name=e.name),e.physical&&(t.physical.uri=e.physical),_.each(e.properties,function(e){var n=_.find(t.properties,function(t){return t.id==e.id});n.expected=n.value=e.value}),t.updated_at=new Date,t},n}]);var service=angular.module("lelylan.components.type.services.config",[]);service.factory("TCConfig",["Category",function(e){var t={show:{properties:!0},inplace:{name:!0,description:!0},saving:{message:"saving..."},property:{types:{text:"Text",range:"Range",number:"Number",color:"Color",password:"Password",date:"Date",time:"Time",datetime:"Date & Time",url:"URL"},placeholders:{text:{"default":"off",accepted:JSON.stringify({on:"On",off:"Off"})},number:{"default":"0",accepted:JSON.stringify({0:"Min",50:"Medium",100:"Max"})},range:{"default":"0",range:{min:0,max:100,step:.1}},color:{"default":"#FFF",accepted:JSON.stringify({"#FFF":"White","#000":"Black"})},password:{"default":"******",accepted:""},url:{"default":"http://example.com",accepted:""},time:{"default":"08:00",accepted:""},date:{"default":"1861-03-17",accepted:""},datetime:{"default":"1861-03-17 12:45:29Z",accepted:""}}},categories:e.query(),base:{property:{name:"",temp:!0,isA:"property",type:"text"},"function":{name:"",temp:!0,isA:"function",properties:[{}]},status:{name:"",temp:!0,isA:"status",properties:[{}],"function":{}}}};return t}]);var service=angular.module("lelylan.components.type.services.helper",[]);service.factory("TCHelper",[function(){var e={};return e.extendResources=function(t,n){_.each(t,function(t){angular.extend(t,e.findResource(t.id,n))})},e.findResource=function(e,t){return _.find(t,function(t){return t.id==e})},e.findIds=function(e){return _.reduce(e,function(e,t){return e.concat(t.id)},[])},e}]),angular.mock={},angular.mock.$BrowserProvider=function(){this.$get=function(){return new angular.mock.$Browser}},angular.mock.$Browser=function(){var e=this;this.isMock=!0,e.$$url="http://server/",e.$$lastUrl=e.$$url,e.pollFns=[],e.$$completeOutstandingRequest=angular.noop,e.$$incOutstandingRequestCount=angular.noop,e.onUrlChange=function(t){return e.pollFns.push(function(){e.$$lastUrl!=e.$$url&&(e.$$lastUrl=e.$$url,t(e.$$url))}),t},e.cookieHash={},e.lastCookieHash={},e.deferredFns=[],e.deferredNextId=0,e.defer=function(t,n){return n=n||0,e.deferredFns.push({time:e.defer.now+n,fn:t,id:e.deferredNextId}),e.deferredFns.sort(function(e,t){return e.time-t.time}),e.deferredNextId++},e.defer.now=0,e.defer.cancel=function(t){var n;return angular.forEach(e.deferredFns,function(e,r){e.id===t&&(n=r)}),void 0!==n?(e.deferredFns.splice(n,1),!0):!1},e.defer.flush=function(t){if(angular.isDefined(t))e.defer.now+=t;else{if(!e.deferredFns.length)throw Error("No deferred tasks to be flushed");e.defer.now=e.deferredFns[e.deferredFns.length-1].time}for(;e.deferredFns.length&&e.deferredFns[0].time<=e.defer.now;)e.deferredFns.shift().fn()},e.$$baseHref="",e.baseHref=function(){return this.$$baseHref}},angular.mock.$Browser.prototype={poll:function(){angular.forEach(this.pollFns,function(e){e()})},addPollFn:function(e){return this.pollFns.push(e),e},url:function(e){return e?(this.$$url=e,this):this.$$url},cookies:function(e,t){return e?(void 0==t?delete this.cookieHash[e]:angular.isString(t)&&4096>=t.length&&(this.cookieHash[e]=t),void 0):(angular.equals(this.cookieHash,this.lastCookieHash)||(this.lastCookieHash=angular.copy(this.cookieHash),this.cookieHash=angular.copy(this.cookieHash)),this.cookieHash)},notifyWhenNoOutstandingRequests:function(e){e()}},angular.mock.$ExceptionHandlerProvider=function(){var e;this.mode=function(t){switch(t){case"rethrow":e=function(e){throw e};break;case"log":var n=[];e=function(e){1==arguments.length?n.push(e):n.push([].slice.call(arguments,0))},e.errors=n;break;default:throw Error("Unknown mode '"+t+"', only 'log'/'rethrow' modes are allowed!")}},this.$get=function(){return e},this.mode("rethrow")},angular.mock.$LogProvider=function(){function e(e,t,n){return e.concat(Array.prototype.slice.call(t,n))}this.$get=function(){var t={log:function(){t.log.logs.push(e([],arguments,0))},warn:function(){t.warn.logs.push(e([],arguments,0))},info:function(){t.info.logs.push(e([],arguments,0))},error:function(){t.error.logs.push(e([],arguments,0))}};return t.reset=function(){t.log.logs=[],t.warn.logs=[],t.info.logs=[],t.error.logs=[]},t.assertEmpty=function(){var e=[];if(angular.forEach(["error","warn","info","log"],function(n){angular.forEach(t[n].logs,function(t){angular.forEach(t,function(t){e.push("MOCK $log ("+n+"): "+(t+"")+"\n"+(t.stack||""))})})}),e.length)throw e.unshift("Expected $log to be empty! Either a message was logged unexpectedly, or an expected log message was not checked and removed:"),e.push(""),Error(e.join("\n---------\n"))},t.reset(),t}},function(){function e(e){var n;if(n=e.match(r)){var o=new Date(0),a=0,i=0;return n[9]&&(a=t(n[9]+n[10]),i=t(n[9]+n[11])),o.setUTCFullYear(t(n[1]),t(n[2])-1,t(n[3])),o.setUTCHours(t(n[4]||0)-a,t(n[5]||0)-i,t(n[6]||0),t(n[7]||0)),o}return e}function t(e){return parseInt(e,10)}function n(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;t>e.length;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}var r=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?:\:?(\d\d)(?:\:?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;angular.mock.TzDate=function(t,r){var o=new Date(0);if(angular.isString(r)){var a=r;if(o.origDate=e(r),r=o.origDate.getTime(),isNaN(r))throw{name:"Illegal Argument",message:"Arg '"+a+"' passed into TzDate constructor is not a valid date string"}}else o.origDate=new Date(r);var i=new Date(r).getTimezoneOffset();o.offsetDiff=6e4*i-36e5*t,o.date=new Date(r+o.offsetDiff),o.getTime=function(){return o.date.getTime()-o.offsetDiff},o.toLocaleDateString=function(){return o.date.toLocaleDateString()},o.getFullYear=function(){return o.date.getFullYear()},o.getMonth=function(){return o.date.getMonth()},o.getDate=function(){return o.date.getDate()},o.getHours=function(){return o.date.getHours()},o.getMinutes=function(){return o.date.getMinutes()},o.getSeconds=function(){return o.date.getSeconds()},o.getMilliseconds=function(){return o.date.getMilliseconds()},o.getTimezoneOffset=function(){return 60*t},o.getUTCFullYear=function(){return o.origDate.getUTCFullYear()},o.getUTCMonth=function(){return o.origDate.getUTCMonth()},o.getUTCDate=function(){return o.origDate.getUTCDate()},o.getUTCHours=function(){return o.origDate.getUTCHours()},o.getUTCMinutes=function(){return o.origDate.getUTCMinutes()},o.getUTCSeconds=function(){return o.origDate.getUTCSeconds()},o.getUTCMilliseconds=function(){return o.origDate.getUTCMilliseconds()},o.getDay=function(){return o.date.getDay()},o.toISOString&&(o.toISOString=function(){return n(o.origDate.getUTCFullYear(),4)+"-"+n(o.origDate.getUTCMonth()+1,2)+"-"+n(o.origDate.getUTCDate(),2)+"T"+n(o.origDate.getUTCHours(),2)+":"+n(o.origDate.getUTCMinutes(),2)+":"+n(o.origDate.getUTCSeconds(),2)+"."+n(o.origDate.getUTCMilliseconds(),3)+"Z"});var c=["getUTCDay","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toGMTString","toJSON","toLocaleFormat","toLocaleString","toLocaleTimeString","toSource","toString","toTimeString","toUTCString","valueOf"];return angular.forEach(c,function(e){o[e]=function(){throw Error("Method '"+e+"' is not implemented in the TzDate mock")}}),o},angular.mock.TzDate.prototype=Date.prototype}(),angular.mock.createMockWindow=function(){var e={},t=[];return e.document=window.document,e.getComputedStyle=angular.bind(window,window.getComputedStyle),e.scrollTo=angular.bind(window,window.scrollTo),e.navigator=window.navigator,e.setTimeout=function(e,n){t.push({fn:e,delay:n})},e.setTimeout.queue=t,e.setTimeout.expect=function(e){return t.length>0?{process:function(){t.shift().fn()}}:(expect("SetTimoutQueue empty. Expecting delay of ").toEqual(e),void 0)},e},angular.mock.dump=function(e){function t(e){var r;return angular.isElement(e)?(e=angular.element(e),r=angular.element("<div></div>"),angular.forEach(e,function(e){r.append(angular.element(e).clone())}),r=r.html()):angular.isArray(e)?(r=[],angular.forEach(e,function(e){r.push(t(e))}),r="[ "+r.join(", ")+" ]"):r=angular.isObject(e)?angular.isFunction(e.$eval)&&angular.isFunction(e.$apply)?n(e):e instanceof Error?e.stack||""+e.name+": "+e.message:angular.toJson(e,!0):e+"",r}function n(e,t){t=t||"  ";var r=[t+"Scope("+e.$id+"): {"];for(var o in e)e.hasOwnProperty(o)&&!o.match(/^(\$|this)/)&&r.push("  "+o+": "+angular.toJson(e[o]));for(var a=e.$$childHead;a;)r.push(n(a,t+"  ")),a=a.$$nextSibling;return r.push("}"),r.join("\n"+t)}return t(e)},angular.mock.$HttpBackendProvider=function(){this.$get=["$rootScope",createHttpBackendMock]},angular.mock.$TimeoutDecorator=function(e,t){function n(e){var t=[];return angular.forEach(e,function(e){t.push("{id: "+e.id+", "+"time: "+e.time+"}")}),t.join(", ")}return e.flush=function(){t.defer.flush()},e.verifyNoPendingTasks=function(){if(t.deferredFns.length)throw Error("Deferred tasks to flush ("+t.deferredFns.length+"): "+n(t.deferredFns))},e},angular.mock.$RootElementProvider=function(){this.$get=function(){return angular.element("<div ng-app></div>")}},angular.module("ngMock",["ng"]).provider({$browser:angular.mock.$BrowserProvider,$exceptionHandler:angular.mock.$ExceptionHandlerProvider,$log:angular.mock.$LogProvider,$httpBackend:angular.mock.$HttpBackendProvider,$rootElement:angular.mock.$RootElementProvider}).config(function(e){e.decorator("$timeout",angular.mock.$TimeoutDecorator)}),angular.module("ngMockE2E",["ng"]).config(["$provide",function(e){e.decorator("$httpBackend",angular.mock.e2e.$httpBackendDecorator)}]),angular.mock.e2e={},angular.mock.e2e.$httpBackendDecorator=["$rootScope","$delegate","$browser",createHttpBackendMock],angular.mock.clearDataCache=function(){var e,t=angular.element.cache;for(e in t)if(t.hasOwnProperty(e)){var n=t[e].handle;n&&angular.element(n.elem).unbind(),delete t[e]}},window.jstestdriver&&function(e){e.dump=function(){var t=[];angular.forEach(arguments,function(e){t.push(angular.mock.dump(e))}),jstestdriver.console.log.apply(jstestdriver.console,t),e.console&&e.console.log.apply(e.console,t)}}(window),(window.jasmine||window.mocha)&&function(e){function t(){return n&&(e.mocha||n.queue.running)}var n=null;beforeEach(function(){n=this}),afterEach(function(){var e=n.$injector;n.$injector=null,n.$modules=null,n=null,e&&(e.get("$rootElement").unbind(),e.get("$browser").pollFns.length=0),angular.mock.clearDataCache(),angular.forEach(angular.element.fragments,function(e,t){delete angular.element.fragments[t]}),MockXhr.$$lastInstance=null,angular.forEach(angular.callbacks,function(e,t){delete angular.callbacks[t]}),angular.callbacks.counter=0}),e.module=angular.mock.module=function(){function e(){if(n.$injector)throw Error("Injector already created, can not register a module!");var e=n.$modules||(n.$modules=[]);angular.forEach(r,function(t){e.push(t)})}var r=Array.prototype.slice.call(arguments,0);return t()?e():e},e.inject=angular.mock.inject=function(){function e(){var e=n.$modules||[];e.unshift("ngMock"),e.unshift("ng");var t=n.$injector;t||(t=n.$injector=angular.injector(e));for(var a=0,i=r.length;i>a;a++)try{t.invoke(r[a]||angular.noop,this)}catch(c){throw c.stack&&o&&(c.stack+="\n"+o.stack),c}finally{o=null}}var r=Array.prototype.slice.call(arguments,0),o=Error("Declaration Location");return t()?e():e}}(window);var service=angular.module("lelylan.components.device.simulate",[]);service.run(["$httpBackend","Simulation","lelylan.config",function(e,t,n){var r=n.endpoint.replace("\\:",":").replace();e.whenPUT(r+"/devices/1/properties").respond(function(e,n,r){return[200,t.update(r),{}]}),e.whenGET(/.*/).passThrough(),e.whenPOST(/.*/).passThrough(),e.whenPUT(/.*/).passThrough(),e.whenDELETE(/.*/).passThrough()}]);var Showdown={extensions:{}},forEach=Showdown.forEach=function(e,t){if("function"==typeof e.forEach)e.forEach(t);else{var n,r=e.length;for(n=0;r>n;n++)t(e[n],n,e)}},stdExtName=function(e){return e.replace(/[_-]||\s/g,"").toLowerCase()};Showdown.converter=function(e){var t,n,r,o=0,a=[],i=[];if("undefind"!=typeof module&&"undefined"!=typeof exports&&"undefind"!=typeof require){var c=require("fs");if(c){var u=c.readdirSync((__dirname||".")+"/extensions").filter(function(e){return~e.indexOf(".js")}).map(function(e){return e.replace(/\.js$/,"")});Showdown.forEach(u,function(e){var t=stdExtName(e);Showdown.extensions[t]=require("./extensions/"+e)})}}if(this.makeHtml=function(e){return t={},n={},r=[],e=e.replace(/~/g,"~T"),e=e.replace(/\$/g,"~D"),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e="\n\n"+e+"\n\n",e=O(e),e=e.replace(/^[ \t]+$/gm,""),Showdown.forEach(a,function(t){e=p(t,e)}),e=k(e),e=f(e),e=d(e),e=h(e),e=j(e),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~"),Showdown.forEach(i,function(t){e=p(t,e)}),e},e&&e.extensions){var s=this;Showdown.forEach(e.extensions,function(e){if("string"==typeof e&&(e=Showdown.extensions[stdExtName(e)]),"function"!=typeof e)throw"Extension '"+e+"' could not be loaded.  It was either not found or is not a valid extension.";Showdown.forEach(e(s),function(e){e.type?"language"===e.type||"lang"===e.type?a.push(e):("output"===e.type||"html"===e.type)&&i.push(e):i.push(e)})})}var l,p=function(e,t){if(e.regex){var n=RegExp(e.regex,"g");return t.replace(n,e.replace)}return e.filter?e.filter(t):void 0},d=function(e){return e+="~0",e=e.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(e,r,o,a,i){return r=r.toLowerCase(),t[r]=P(o),a?a+i:(i&&(n[r]=i.replace(/"/g,"&quot;")),"")}),e=e.replace(/~0/,"")},f=function(e){return e=e.replace(/\n/g,"\n\n"),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,g),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,g),e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,g),e=e.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,g),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,g),e=e.replace(/\n\n/g,"\n")},g=function(e,t){var n=t;return n=n.replace(/\n\n/g,"\n"),n=n.replace(/^\n/,""),n=n.replace(/\n+$/g,""),n="\n\n~K"+(r.push(n)-1)+"K\n\n"},h=function(e){e=C(e);var t=D("<hr />");return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,t),e=S(e),e=E(e),e=H(e),e=f(e),e=U(e)},m=function(e){return e=x(e),e=y(e),e=M(e),e=w(e),e=v(e),e=_(e),e=P(e),e=F(e),e=e.replace(/  +\n/g," <br />\n")},y=function(e){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return e=e.replace(t,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=L(t,"\\`*_")})},v=function(e){return e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,$),e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,$),e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,$)},$=function(e,r,o,a,i,c,u,s){void 0==s&&(s="");var l=r,p=o,d=a.toLowerCase(),f=i,g=s;if(""==f)if(""==d&&(d=p.toLowerCase().replace(/ ?\n/g," ")),f="#"+d,void 0!=t[d])f=t[d],void 0!=n[d]&&(g=n[d]);else{if(!(l.search(/\(\s*\)$/m)>-1))return l;f=""}f=L(f,"*_");var h='<a href="'+f+'"';return""!=g&&(g=g.replace(/"/g,"&quot;"),g=L(g,"*_"),h+=' title="'+g+'"'),h+=">"+p+"</a>"},w=function(e){return e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,T),e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,T)},T=function(e,r,o,a,i,c,u,s){var l=r,p=o,d=a.toLowerCase(),f=i,g=s;if(g||(g=""),""==f){if(""==d&&(d=p.toLowerCase().replace(/ ?\n/g," ")),f="#"+d,void 0==t[d])return l;f=t[d],void 0!=n[d]&&(g=n[d])}p=p.replace(/"/g,"&quot;"),f=L(f,"*_");var h='<img src="'+f+'" alt="'+p+'"';return g=g.replace(/"/g,"&quot;"),g=L(g,"*_"),h+=' title="'+g+'"',h+=" />"},C=function(e){function t(e){return e.replace(/[^\w]/g,"").toLowerCase()}return e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,n){return D('<h1 id="'+t(n)+'">'+m(n)+"</h1>")}),e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,n){return D('<h2 id="'+t(n)+'">'+m(n)+"</h2>")}),e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,n,r){var o=n.length;return D("<h"+o+' id="'+t(r)+'">'+m(r)+"</h"+o+">")})},S=function(e){e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return o?e=e.replace(t,function(e,t,n){var r=t,o=n.search(/[*+-]/g)>-1?"ul":"ol";r=r.replace(/\n{2,}/g,"\n\n\n");var a=l(r);return a=a.replace(/\s+$/,""),a="<"+o+">"+a+"</"+o+">\n"}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(t,function(e,t,n,r){var o=t,a=n,i=r.search(/[*+-]/g)>-1?"ul":"ol",a=a.replace(/\n{2,}/g,"\n\n\n"),c=l(a);return c=o+"<"+i+">\n"+c+"</"+i+">\n"})),e=e.replace(/~0/,"")};l=function(e){return o++,e=e.replace(/\n{2,}$/,"\n"),e+="~0",e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(e,t,n,r,o){var a=o,i=t;return i||a.search(/\n{2,}/)>-1?a=h(q(a)):(a=S(q(a)),a=a.replace(/\n$/,""),a=m(a)),"<li>"+a+"</li>\n"}),e=e.replace(/~0/g,""),o--,e};var E=function(e){return e+="~0",e=e.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var r=t,o=n;return r=b(q(r)),r=O(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code>"+r+"\n</code></pre>",D(r)+o}),e=e.replace(/~0/,"")},k=function(e){return e+="~0",e=e.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(e,t,n){var r=t,o=n;return o=b(o),o=O(o),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,""),o="<pre><code"+(r?' class="'+r+'"':"")+">"+o+"\n</code></pre>",D(o)}),e=e.replace(/~0/,"")},D=function(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(r.push(e)-1)+"K\n\n"},x=function(e){return e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,r){var o=r;return o=o.replace(/^([ \t]*)/g,""),o=o.replace(/[ \t]*$/g,""),o=b(o),t+"<code>"+o+"</code>"})},b=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=L(e,"*_{}[]\\",!1)},F=function(e){return e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),e=e.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},H=function(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;return n=n.replace(/^[ \t]*>[ \t]?/gm,"~0"),n=n.replace(/~0/g,""),n=n.replace(/^[ \t]+$/gm,""),n=h(n),n=n.replace(/(^|\n)/g,"$1  "),n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return n=n.replace(/^  /gm,"~0"),n=n.replace(/~0/g,"")}),D("<blockquote>\n"+n+"\n</blockquote>")})},U=function(e){e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");for(var t=e.split(/\n{2,}/g),n=[],o=t.length,a=0;o>a;a++){var i=t[a];i.search(/~K(\d+)K/g)>=0?n.push(i):i.search(/\S/)>=0&&(i=m(i),i=i.replace(/^([ \t]*)/g,"<p>"),i+="</p>",n.push(i))}o=n.length;for(var a=0;o>a;a++)for(;n[a].search(/~K(\d+)K/)>=0;){var c=r[RegExp.$1];c=c.replace(/\$/g,"$$$$"),n[a]=n[a].replace(/~K\d+K/,c)
}return n.join("\n\n")},P=function(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},M=function(e){return e=e.replace(/\\(\\)/g,N),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,N)},_=function(e){return e=e.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),e=e.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(e,t){return A(j(t))})},A=function(e){var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e="mailto:"+e,e=e.replace(/./g,function(e){if("@"==e)e=t[Math.floor(2*Math.random())](e);else if(":"!=e){var n=Math.random();e=n>.9?t[2](e):n>.45?t[1](e):t[0](e)}return e}),e='<a href="'+e+'">'+e+"</a>",e=e.replace(/">.+:/g,'">')},j=function(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)})},q=function(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,"")},O=function(e){return e=e.replace(/\t(?=\t)/g,"    "),e=e.replace(/\t/g,"~A~B"),e=e.replace(/~B(.+?)~A/g,function(e,t){for(var n=t,r=4-n.length%4,o=0;r>o;o++)n+=" ";return n}),e=e.replace(/~A/g,"    "),e=e.replace(/~B/g,"")},L=function(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var o=RegExp(r,"g");return e=e.replace(o,N)},N=function(e,t){var n=t.charCodeAt(0);return"~E"+n+"E"}},"undefined"!=typeof module&&(module.exports=Showdown),"function"==typeof define&&define.amd&&define("showdown",function(){return Showdown}),angular.module("lelylan.dashboards.types",["lelylan.components.type"]),angular.module("lelylan.dashboards.types").config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/home.html",controller:"DashboardCtrl"}).when("/new",{templateUrl:"views/new-type.html",controller:"CreateCtrl"}).when("/types",{templateUrl:"views/types.html",controller:"YoursCtrl"}).when("/popular",{templateUrl:"views/types.html",controller:"PopularCtrl"}).when("/categories/:category",{templateUrl:"views/types.html",controller:"CategoryCtrl"}).when("/types/:typeId",{templateUrl:"views/type.html",controller:"TypeCtrl"}).when("/learn",{templateUrl:"views/learn.html",controller:"DashboardCtrl"}).when("/how",{templateUrl:"views/how.html",controller:"DashboardCtrl"}).otherwise({redirectTo:"/"})}]),CategoryCtrl.$inject=["Type","$scope","$routeParams","$rootScope"],CreateCtrl.$inject=["Type","AccessToken","$scope","$routeParams","$rootScope","$location"],DashboardCtrl.$inject=["$scope","$rootScope","$http","$location","$timeout"];var cl=new CanvasLoader("lelylan-request-loading");cl.setColor("#239cbb"),cl.setShape("spiral"),cl.setDiameter(20),cl.setDensity(70),cl.setRange(.7),cl.setSpeed(2),cl.setFPS(35),cl.show(),PopularCtrl.$inject=["$scope","$rootScope"];var popularTypesList=[{uri:"http://api.lelylan.com/types/1",id:"1",name:"Basic Light",description:"The **Basic Light** type represents the most basic light structure.",categories:["lights"],created_at:"2012-09-01T15:01:22Z",updated_at:"2012-09-01T15:01:22Z"},{uri:"http://api.lelylan.com/types/2",id:"2",name:"Complex Light",description:"The **Comples Light** type represents the most complete light structure.",categories:["lights"],created_at:"2012-09-01T15:01:22Z",updated_at:"2012-09-01T15:01:22Z"}];YoursCtrl.$inject=["Type","AccessToken","$scope","$rootScope"],TypeCtrl.$inject=["$scope","$routeParams","$location"];